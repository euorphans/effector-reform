/*! For license information please see 643.634cc566.js.LICENSE.txt */
"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[643],{1063:(e,t,r)=>{var n=r(6540);var a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=n.useState,s=n.useEffect,c=n.useLayoutEffect,i=n.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(n){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=o({inst:{value:r,getSnapshot:t}}),a=n[0].inst,u=n[1];return c((function(){a.value=r,a.getSnapshot=t,l(a)&&u({inst:a})}),[e,r,t]),s((function(){return l(a)&&u({inst:a}),e((function(){l(a)&&u({inst:a})}))}),[e]),i(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:u},8940:(e,t,r)=>{var n=r(6540),a=r(9888);var o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=a.useSyncExternalStore,c=n.useRef,i=n.useEffect,l=n.useMemo,u=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var f=c(null);if(null===f.current){var d={hasValue:!1,value:null};f.current=d}else d=f.current;f=l((function(){function e(e){if(!i){if(i=!0,s=e,e=n(e),void 0!==a&&d.hasValue){var t=d.value;if(a(t,e))return c=t}return c=e}if(t=c,o(s,e))return t;var r=n(e);return void 0!==a&&a(t,r)?t:(s=e,c=r)}var s,c,i=!1,l=void 0===r?null:r;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,r,n,a]);var p=s(e,f[0],f[1]);return i((function(){d.hasValue=!0,d.value=p}),[p]),u(p),p}},9888:(e,t,r)=>{e.exports=r(1063)},9242:(e,t,r)=>{e.exports=r(8940)},9084:(e,t,r)=>{r.d(t,{OD:()=>v,mJ:()=>x,Fv:()=>p,DG:()=>P,k8:()=>g,xR:()=>f});var n=r(2489),a={}.hasOwnProperty,o=(e,t)=>a.call(e,t);function s(e){var t=function(e){return Object.keys(e).some((t=>!["targets","source"].includes(t)&&n.is.unit(e[t])))}(e)?{targets:e}:e,{targets:r,source:a=(0,n.lh)({name:"source",sid:"e9ipnn"})}=t,s=function(e){if(o(r,e)){var t=r[e],s=(0,n.XM)({and:[{source:a,batch:!1,filter:t=>"object"==typeof t&&null!==t&&e in t}],or:{name:"hasTargetKey",sid:"eapc0z"}});(0,n.XM)({and:[{batch:!1,clock:s,fn:t=>t[e],target:t}],or:{sid:"mkzcy4"}})}};for(var c in r)s(c);return a}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){var t=function(e){return Object.keys(e).some((t=>!["events","reset","target"].includes(t)&&n.is.unit(e[t])))}(e)?{events:e}:e,{events:r,reset:a,target:o=(0,n.lh)({name:"target",sid:"p73fff"})}=t;return n.is.unit(o)&&n.is.targetable(o)||u("target should be a targetable unit"),a&&!n.is.unit(a)&&u("reset should be a unit"),(0,n.Ns)(o,(()=>{var e=Object.keys(r),t=Array.isArray(r)?[...e].fill(""):{},s=(0,n.y$)(e.length,{and:{serialize:"ignore"},name:"$counter",sid:"-ahoahx"}),l=(0,n.y$)(t,{and:{serialize:"ignore"},name:"$results",sid:"oy8iyn"});(0,n.XM)({and:[{source:o,target:s.reinit}],or:{sid:"blex0c"}}),l.reset(o),a&&((0,n.XM)({and:[{source:a,target:s.reinit}],or:{sid:"bnm3fi"}}),l.reset(a));var u=function(e){var t=(0,n.y$)(!1,{and:{serialize:"ignore"},name:"$isDone",sid:"-rf2fac"}).on(r[e],(()=>!0)).reset(o);a&&t.reset(a),s.on(t,(e=>e-1)),l.on(r[e],((t,r)=>{var n=Array.isArray(t)?[...t]:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t);return n[e]=r,n}))};for(var f of e)u(f);var d=(0,n.XM)({and:[{source:l,clock:[...Object.values(r)]}],or:{name:"eventsTrriggered",sid:"-lro8bq"}});(0,n.XM)({and:[{source:d,filter:s.map((e=>0===e),{skipVoid:!1}),target:o}],or:{sid:"-dlkr2s"}})})),o}function u(e){throw new Error(e)}const f=Symbol("primary-field"),d={error:null,forkOnCreateForm:!0};function p(e,t){const r=!(null==t||!t.clearOuterErrorOnChange),a={...d,...t},o=(0,n.y$)(e,{name:"<field value>"}),s=(0,n.y$)(null,{name:"<inner field error>"}),c=(0,n.y$)(null,{name:"<outer field error>"}),i=(0,n.kg)({innerError:s,outerError:c}).map((({innerError:e,outerError:t})=>t||e)),l=i.map((e=>null===e)),u=(0,n.y$)(!1),h=(0,n.y$)(!1),m=(0,n.lh)("<field change>"),g=(0,n.lh)("<field changed>"),v=(0,n.lh)(),b=(0,n.lh)(),y=(0,n.lh)(),k=(0,n.lh)(),M=(0,n.lh)("<field setError>"),E=(0,n.lh)("<field error changed>"),S=(0,n.lh)(),X=(0,n.lh)("<field reset>"),$=(0,n.lh)(),w=(0,n.lh)(),O=(0,n.lh)(),V=(0,n.lh)(),C=(0,n.lh)(),I=(0,n.lh)(),x=(0,n.lh)();return r&&(0,n.XM)({clock:o,fn:()=>null,target:c}),(0,n.XM)({clock:v,fn:()=>!1,target:h}),(0,n.XM)({clock:y,fn:()=>!0,target:h}),(0,n.XM)({clock:h,filter:e=>e,target:k}),(0,n.XM)({clock:h,filter:e=>!e,target:b}),(0,n.XM)({clock:S,source:c,fn:(e,t)=>e||t,target:x}),(0,n.XM)({clock:M,target:x}),(0,n.XM)({clock:m,target:I}),(0,n.XM)({clock:I,target:o}),(0,n.XM)({clock:o,fn:()=>!0,target:u}),(0,n.XM)({clock:O,target:V}),(0,n.XM)({clock:V,fn:e=>e.value,target:o}),(0,n.XM)({clock:$,fn:e=>e.value,target:s}),(0,n.XM)({clock:w,fn:e=>e.value,target:c}),(0,n.XM)({clock:$,source:c,fn:(e,t)=>({...t,value:e||t.value}),target:C}),(0,n.XM)({clock:w,target:C}),(0,n.XM)({clock:o,target:g}),(0,n.XM)({clock:M,target:c}),(0,n.XM)({clock:i,target:E}),(0,n.XM)({clock:S,target:s}),(0,n.XM)({clock:X,fn:()=>e,target:o}),(0,n.XM)({clock:X,fn:()=>null,target:[s,c]}),(0,n.XM)({clock:X,fn:()=>!1,target:u}),(0,n.XM)({clock:X,fn:()=>null,target:[S,M]}),{type:f,batchedSetInnerError:$,batchedSetOuterError:w,batchedSetValue:O,batchedErrorChanged:C,batchedValueChanged:V,notBatchedErrorChanged:x,notBatchedValueChanged:I,$value:o,$error:i,$isValid:l,$isDirty:u,$isFocused:h,blur:v,blurred:b,focus:y,focused:k,change:m,changed:g,changeError:M,errorChanged:E,reset:X,setInnerError:S,forkOnCreateForm:a.forkOnCreateForm,fork:r=>p(e,{...t,...r}),"@@unitShape":()=>({value:o,error:i,isValid:l,isDirty:u,isFocused:h,blur:v,blurred:b,focus:y,focused:k,changeError:M,change:m,reset:X})}}function h(e){return"type"in e&&e.type===f}function m(e){return"boolean"==typeof e||"string"==typeof e||"number"==typeof e}function g(e){const t=typeof File<"u"&&e instanceof File,r=typeof Buffer<"u"&&e instanceof Buffer,n=typeof FileList<"u"&&e instanceof FileList;return m(e)||"bigint"==typeof e||r||t||n||e instanceof Date||e instanceof Blob||e instanceof ArrayBuffer||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof BigInt64Array}const v=Symbol("array-field");function b(e){for(const t of e)(0,n.w_)(t)}function y(e){if(!g(e))for(const t in e){const r=e[t];switch(r.type){case v:{const e=r.$values.getState(),t=r;for(const r of e){if(g(r))break;y(r)}b([r.$values,r.$error,r.change,r.changed,r.changeError,r.errorChanged,r.insert,r.inserted,r.move,r.moved,r.pop,r.popped,r.push,r.pushed,r.remove,r.removed,r.replace,r.replaced,r.swap,r.swapped,r.unshift,r.unshifted,t.setInnerError,t.cleared,t.batchedSetValue,t.notBatchedErrorChanged,t.notBatchedValueChanged,t.batchedSetOuterError,t.batchedSetInnerError,t.batchedErrorChanged,t.batchedValueChanged]);break}case f:{const e=r;b([r.$value,r.$error,r.change,r.changeError,r.errorChanged,r.changed,e.setInnerError,e.batchedSetValue,e.notBatchedErrorChanged,e.notBatchedValueChanged,e.batchedSetOuterError,e.batchedSetInnerError,e.batchedErrorChanged,e.batchedValueChanged]);break}default:y(r)}}}function k(e){return"type"in e&&e.type===v}function M(e,t){return{id:Math.random().toString(),type:t,fields:e}}function E(e){return Object.values(e).reduce(((e,t)=>(0===t.fields.length&&e.tasks.push(t),"values"===t.type&&"all"!==e.updateType?e.updateType="error"===e.updateType?"all":"value":"errors"===t.type&&"all"!==e.updateType&&(e.updateType="value"===e.updateType?"all":"error"),e)),{tasks:[],updateType:"none"})}function S({field:e,path:t,key:r,resultErrorsNode:a,resultValuesNode:o,map:s}){const c=e,i=c.$values.getState(),l=[...t,r].join(".");o[r]=[],a[r]={error:null,errors:[]};const u=e=>{e.map(((e,n)=>{g(e)?o[r].push(e):(o[r].push({}),a[r].errors.push({}),s.call(this,e,o[r][n],a[r].errors[n],[...t,r,n.toString()]))}))};u(i);const f=(0,n.EH)((({values:e})=>{this.api[l].clear(),o[r]=[],a[r]={error:null,errors:[]},u(e)})),d=(0,n.EH)((({error:e})=>{a[r].error=e}));(0,n.XM)({clock:c.notBatchedErrorChanged,fn:e=>({error:e}),target:d}),(0,n.XM)({clock:c.notBatchedValueChanged,fn:e=>({values:e}),target:f}),(0,n.XM)({clock:c.batchedErrorChanged,fn:({value:e,"@@batchInfo":t})=>({error:e,batchInfo:t}),target:d}),(0,n.XM)({clock:c.batchedValueChanged,fn:({value:e,"@@batchInfo":t})=>({values:e,batchInfo:t}),target:f}),(0,n.XM)({clock:d.done,filter:({params:e})=>!e.batchInfo,fn:()=>({fieldPath:l,type:"error"}),target:this.schemaUpdated}),(0,n.XM)({clock:[f.done,d.done],filter:({params:e})=>!!e.batchInfo,fn:({params:e})=>({fieldPath:l,"@@batchInfo":e.batchInfo}),target:this.batchedSchemaUpdated}),(0,n.XM)({clock:f.done,filter:({params:e})=>!e.batchInfo,fn:()=>({fieldPath:l,type:"value"}),target:this.schemaUpdated}),this.api[l]={reset:c.reset,batchedSetValue:c.batchedSetValue,batchedSetOuterError:c.batchedSetOuterError,batchedSetInnerError:c.batchedSetInnerError,clearForErrors:()=>{},clear:e=>{const t=Object.keys(this.api).filter((e=>e.startsWith(l))).filter((e=>e!==l));for(const r of t)this.api[r].clear(!0),this.api[r].clearForErrors();e&&(0,n.w_)(f)},clearInnerError:c.setInnerError.prepend((()=>null)),clearOuterError:c.changeError.prepend((()=>null)),setInnerError:c.setInnerError,setOuterError:c.changeError,setValue:c.change}}function X({resultValuesNode:e,resultErrorsNode:t,field:r,key:a,path:o}){const s=r;e[a]=s.$value.getState(),t[a]=s.$error.getState();const c=[...o,a].join(".");t[a]&&(this.isValid=!1);const i=(0,n.EH)((({value:t})=>{e[a]=t})),l=(0,n.EH)((({error:e})=>{t[a]=e}));(0,n.XM)({clock:s.notBatchedErrorChanged,fn:e=>({error:e}),target:l}),(0,n.XM)({clock:s.notBatchedValueChanged,fn:e=>({value:e}),target:i}),(0,n.XM)({clock:s.batchedErrorChanged,fn:({value:e,"@@batchInfo":t})=>({error:e,batchInfo:t}),target:l}),(0,n.XM)({clock:s.batchedValueChanged,fn:({value:e,"@@batchInfo":t})=>({value:e,batchInfo:t}),target:i}),(0,n.XM)({clock:l.done,filter:({params:e})=>!e.batchInfo,fn:()=>({fieldPath:c,type:"error"}),target:this.schemaUpdated}),(0,n.XM)({clock:[i.done,l.done],filter:({params:e})=>!!e.batchInfo,fn:({params:e})=>({fieldPath:c,"@@batchInfo":e.batchInfo}),target:this.batchedSchemaUpdated}),(0,n.XM)({clock:i.done,filter:({params:e})=>!e.batchInfo,fn:()=>({fieldPath:c,type:"value"}),target:this.schemaUpdated}),(0,n.XM)({clock:s.focused,fn:()=>({fieldPath:c}),target:this.focused}),(0,n.XM)({clock:s.blurred,fn:()=>({fieldPath:c,type:"value"}),target:this.blurred}),this.api[c]={reset:s.reset,batchedSetValue:s.batchedSetValue,batchedSetOuterError:s.batchedSetOuterError,batchedSetInnerError:s.batchedSetInnerError,clearForErrors:()=>{(0,n.w_)(l)},clear:()=>{(0,n.w_)(i)},clearInnerError:s.setInnerError.prepend((()=>null)),clearOuterError:s.changeError.prepend((()=>null)),setInnerError:s.setInnerError,setOuterError:s.changeError,setValue:s.change}}function $(e,t,r,n=[]){for(const a in e){const o=e[a];switch(o.type){case f:X.call(this,{field:o,resultValuesNode:t,resultErrorsNode:r,key:a,path:n});break;case v:S.call(this,{field:o,resultValuesNode:t,resultErrorsNode:r,key:a,path:n,map:$});break;default:t[a]={},r[a]={},$.call(this,o,t[a],r[a],[...n,a])}}}function w(e){const{schemaUpdated:t,focused:r,blurred:a}=function(){const e=(0,n.lh)("<schema updated>");return{blurred:(0,n.lh)("<blurred>"),focused:(0,n.lh)("<focused>"),schemaUpdated:e}}(),{batchedSchemaUpdated:o,addBatchTask:c}=function(e){const t=(0,n.y$)({},{name:"<batch info>"}),r=(0,n.lh)(),a=(0,n.lh)("<add batch task>");return(0,n.XM)({clock:a,source:t,fn:(e,t)=>({...e,[t.id]:t}),target:t}),(0,n.XM)({clock:r,source:t,fn:(e,{fieldPath:t,"@@batchInfo":r})=>{const n=e[r.id];return n.fields=n.fields.filter((e=>e!==t)),{...e}},target:t}),(0,n.XM)({clock:t,filter:e=>E(e).tasks.length>0,fn:e=>{const{tasks:t,updateType:r}=E(e);return{fieldPath:t.map((e=>e.fields)).join(" "),type:r}},target:e}),(0,n.XM)({clock:t,fn:e=>{const{tasks:t}=E(e);if(0===t.length)return e;const r={...e};for(const n of t)delete r[n.id];return r},target:t}),{addBatchTask:a,batchedSchemaUpdated:r}}(t),i=function(e,t,r,n,a){const o={},s={},c={},i={isValid:!0,api:c,schemaUpdated:t,batchedSchemaUpdated:r,focused:n,blurred:a};return $.call(i,e,o,s),{values:o,errors:s,api:c,isValid:i.isValid}}(e,t,o,r,a),l=(0,n.y$)(i.api),u=(0,n.y$)(i.values),f=(0,n.y$)(i.errors),d=(0,n.y$)(i.isValid);return(0,n.XM)({clock:t,fn:e=>{switch(e.type){case"value":return{values:{...i.values},api:{...i.api}};case"error":return{errors:{...i.errors},isValid:i.isValid};case"all":return{values:{...i.values},api:{...i.api},errors:{...i.errors},isValid:i.isValid};case"none":return{}}},target:s({api:l,values:u,errors:f,isValid:d})}),{$api:l,$values:u,$errors:f,$isValid:d,addBatchTask:c,focused:r,blurred:a}}function O(e,t,r,n,a=!1){const o=Object.keys(t),s=a?o:Object.keys(e);if(0===Object.keys(s).length)return;const c=M(s,"errors");r(c);for(const i of s){const r=t[i];if(r)switch(n){case"inner":r.batchedSetInnerError({value:e[i]??null,"@@batchInfo":{id:c.id,fieldPath:i}});break;case"outer":r.batchedSetOuterError({value:e[i]??null,"@@batchInfo":{id:c.id,fieldPath:i}})}else console.error(`Unknown field with path: ${i}`)}}function V(e,t){for(const r in e){const n=e[r];"inner"===t?n.clearInnerError():"outer"===t&&n.clearOuterError()}}function C(e){for(const t in e)e[t].clear(!0)}const I={forkOnCreateForm:!0};function x(e,t){const r=!(null==t||!t.clearOuterErrorOnChange);function a(){return e.map(j)}function o(e){return Array.isArray(e)?e.map(j):[j(e)]}const c={...I,...t},i=(0,n.EH)((({nodes:e,indexes:t})=>{for(const r of e){if(g(r))break;y(r)}return t})),l=(0,n.y$)(a(),{name:"<array field values>",serialize:{read(e){if(!e)throw new Error;if(!Array.isArray(e))throw new Error;return e.map((e=>{const t=j(e.values),r=e.errors,n=j(t),{$api:a,addBatchTask:o}=w(n);return O(r,a.getState(),o,"outer"),n}))},write:e=>e.map((e=>m(e)?e:w(e))).map((e=>m(e)?e:g(e)?null:{values:e.$values.getState(),errors:e.$errors.getState()})).filter(Boolean)}}),u=(0,n.y$)(null,{name:"<inner field error>"}),f=(0,n.y$)(null,{name:"<outer field error>"}),d=(0,n.kg)({innerError:u,outerError:f}).map((({innerError:e,outerError:t})=>t||e)),p=d.map((e=>null===e)),h=(0,n.y$)(!1),b=(0,n.lh)(),k=(0,n.lh)(),M=(0,n.lh)(),E=(0,n.lh)(),S=(0,n.lh)(),X=(0,n.lh)(),$=(0,n.lh)(),V=(0,n.lh)(),C=(0,n.lh)(),A=(0,n.lh)(),P=(0,n.lh)(),D=(0,n.lh)(),N=(0,n.lh)(),B=(0,n.lh)(),F=(0,n.lh)(),R=(0,n.lh)(),z=(0,n.lh)(),K=(0,n.lh)(),T=(0,n.lh)(),q=(0,n.lh)(),U=(0,n.lh)(),_=(0,n.lh)(),H=(0,n.lh)(),L=(0,n.lh)(),W=(0,n.lh)(),G=(0,n.lh)(),Y=(0,n.lh)(),J=(0,n.lh)(),Q=(0,n.lh)(),Z=(0,n.lh)(),ee=(0,n.lh)(),te=(0,n.K0)({source:l,effect:async(e,t)=>(await i(function(e,t){return e.reduce(((e,r,n)=>(t.includes(r)||(e.nodes.push(r),e.indexes.push(n)),e)),{nodes:[],indexes:[]})}(e,t)),t)});r&&(0,n.XM)({clock:l,fn:()=>null,target:f}),(0,n.XM)({clock:l,fn:()=>!0,target:h}),(0,n.XM)({clock:te.doneData,target:l}),(0,n.XM)({clock:Q,fn:()=>[],target:[te,Z]}),(0,n.XM)({clock:ee,fn:()=>a(),target:te});const re=(0,n.K0)({source:l,effect:(e,t)=>e.concat(o(t))}),ne=(0,n.K0)({source:l,effect:(e,t)=>{const r=[...e],n=r[t.indexA];return r[t.indexA]=r[t.indexB],r[t.indexB]=n,r}}),ae=(0,n.K0)({source:l,effect:(e,t)=>{const r=[...e];return r.splice(t.to,0,...r.splice(t.from,1)),r}}),oe=(0,n.K0)({source:l,effect:(e,t)=>{const r=[...e];return r.splice(t.index,0,...o(t.value)),r}}),se=(0,n.K0)({source:l,effect:(e,t)=>{const r=[...e];return r.unshift(...o(t)),r}}),ce=(0,n.K0)({source:l,effect:async(e,t)=>{const r=[...e];return r.splice(t.index,1)[0],r}}),ie=(0,n.K0)({source:l,effect:e=>{const t=[...e];return t.pop(),t}}),le=(0,n.K0)({source:l,effect:(e,t)=>{const r=[...e];return r.splice(t.index,1,...o(t.value)),r}});return(0,n.XM)({clock:l,target:C}),(0,n.XM)({clock:M,fn:e=>({...e,value:o(e.value)}),target:$}),(0,n.XM)({clock:$,fn:e=>e.value,target:te}),(0,n.XM)({clock:V,fn:e=>o(e),target:E}),(0,n.XM)({clock:E,target:te}),(0,n.XM)({clock:N,target:re}),(0,n.XM)({clock:re.done,fn:({params:e,result:t})=>({pushed:{params:e,result:t},values:t}),target:s({pushed:B,values:te})}),(0,n.XM)({clock:F,target:ne}),(0,n.XM)({clock:ne.done,fn:({params:e,result:t})=>({swapped:{params:e,result:t},values:t}),target:s({swapped:R,values:te})}),(0,n.XM)({clock:z,target:ae}),(0,n.XM)({clock:ae.done,fn:({params:e,result:t})=>({moved:{params:e,result:t},values:t}),target:s({moved:K,values:te})}),(0,n.XM)({clock:T,target:oe}),(0,n.XM)({clock:oe.done,fn:({params:e,result:t})=>({inserted:{params:e,result:t},values:t}),target:s({inserted:q,values:te})}),(0,n.XM)({clock:U,target:se}),(0,n.XM)({clock:se.done,fn:({params:e,result:t})=>({unshifted:{params:e,result:t},values:t}),target:s({unshifted:_,values:te})}),(0,n.XM)({clock:H,target:ce}),(0,n.XM)({clock:ce.done,fn:({params:e,result:t})=>({removed:{params:e,result:t},values:t}),target:s({removed:L,values:te})}),(0,n.XM)({clock:W,target:ie}),(0,n.XM)({clock:ie.doneData,fn:e=>e,target:[te,G]}),(0,n.XM)({clock:Y,target:le}),(0,n.XM)({clock:le.done,fn:({params:e,result:t})=>({replaced:{params:e,result:t},values:t}),target:s({replaced:J,values:te})}),(0,n.XM)({clock:P,target:S}),(0,n.XM)({clock:A,source:f,fn:(e,t)=>e||t,target:S}),(0,n.XM)({clock:P,target:f}),(0,n.XM)({clock:A,target:u}),(0,n.XM)({clock:b,fn:e=>e.value,target:u}),(0,n.XM)({clock:k,fn:e=>e.value,target:f}),(0,n.XM)({clock:b,source:f,fn:(e,t)=>({...t,value:e||t.value}),target:X}),(0,n.XM)({clock:k,target:X}),(0,n.XM)({clock:d,target:D}),{type:v,batchedSetInnerError:b,batchedSetOuterError:k,batchedSetValue:M,notBatchedErrorChanged:S,notBatchedValueChanged:E,batchedErrorChanged:X,batchedValueChanged:$,$values:l,$error:d,$isDirty:h,$isValid:p,setInnerError:A,changeError:P,errorChanged:D,change:V,changed:C,push:N,pushed:B,swap:F,swapped:R,move:z,moved:K,cleared:i.doneData,insert:T,inserted:q,unshift:U,unshifted:_,remove:H,removed:L,pop:W,popped:G,replace:Y,replaced:J,reset:ee,forkOnCreateForm:c.forkOnCreateForm,fork:r=>x(e,{...t,...r}),"@@unitShape":()=>({values:l,error:d,isDirty:h,isValid:p,change:V,changeError:P,reset:ee,push:N,move:z,swap:F,insert:T,unshift:U,remove:H,pop:W,replace:Y})}}function j(e){const t={};if(g(e))return e;for(const r in e){const n=e[r];g(n)?t[r]=p(n):h(n)||k(n)?t[r]=n:Array.isArray(n)?t[r]=x(n):"object"==typeof n&&(t[r]=j(n))}return t}function A(e){const t={};for(const r in e){const n=e[r];switch(n.type){case v:case f:t[r]=n.forkOnCreateForm?n.fork():n;break;case void 0:t[r]=A(n)}}return t}function P(e){const{schema:t,validation:r=(()=>null),validationStrategies:a=["submit","change","blur","focus"],clearOuterErrorsOnSubmit:o=!0}=e,s=A(j(t)),{$errors:c,$values:i,$isValid:u,$api:f,focused:d,blurred:p,addBatchTask:h}=w(s),m=(0,n.y$)(!1),v=(0,n.K0)({source:f,effect:C}),b=(0,n.K0)({source:f,effect:e=>V(e,"outer")}),y=(0,n.K0)({source:f,effect:e=>V(e,"inner")}),k=(0,n.K0)({source:f,effect:(e,t)=>function(e,t,r){const n={};if(function e(r,a=[]){for(const o in r){const s=r[o],c=[...a,o].join(".");if(g(s)||Array.isArray(s)){const e=t[c];if(!e){console.error(`Unknown field with path: ${c}`);continue}n[c]={event:e.batchedSetValue,value:s}}else"object"==typeof s&&e(s,[...a,o])}}(e),0===Object.keys(n).length)return;const a=M(Object.keys(n),"values");r(a);for(const o in n)n[o].event({value:n[o].value,"@@batchInfo":{id:a.id,fieldPath:o}})}(t,e,h)}),E=(0,n.K0)({source:f,effect:(e,t)=>O(t,e,h,"inner",!0)}),S=(0,n.lh)("<form set values>"),X=(0,n.lh)("<form set partial values>"),$=(0,n.lh)("<form set errors>"),I=(0,n.lh)("<form full clear>"),x=(0,n.lh)("<form clear outer errors>"),P=(0,n.lh)("<form changed>"),D=(0,n.lh)("<form errors changed>"),N=(0,n.lh)("<form submit>"),B=(0,n.lh)("<form submitted>"),F=(0,n.lh)("<form validate>"),R=(0,n.lh)("<form validated>"),z=(0,n.lh)("<form validated and submitted>"),K=(0,n.lh)("<form reset>"),T=(0,n.EH)(r),q=T.pending,U=[...new Set(a)];for(const l of U)switch(l){case"submit":(0,n.XM)({clock:B,target:F});break;case"focus":(0,n.XM)({clock:d,target:F});break;case"blur":(0,n.XM)({clock:p,target:F});break;case"change":(0,n.XM)({clock:P,target:F})}return(0,n.XM)({clock:I,target:v}),(0,n.XM)({clock:i,target:P}),(0,n.XM)({clock:[S,X],target:k}),(0,n.XM)({clock:$,target:E}),(0,n.XM)({clock:i,fn:()=>!0,target:m}),(0,n.XM)({clock:N,source:i,target:B}),(0,n.XM)({clock:x,target:b}),o&&(0,n.XM)({clock:N,target:x}),(0,n.XM)({clock:F,source:i,target:T}),(0,n.XM)({clock:T.doneData,filter:e=>!e,target:R}),(0,n.XM)({clock:R,target:y}),(0,n.XM)({clock:T.doneData,filter:Boolean,target:$}),(0,n.XM)({clock:l([R,B]),source:i,target:z}),{$errors:c,$values:i,$isDirty:m,$isValid:u,$isValidationPending:q,fields:s,changed:P,errorsChanged:D,submit:N,submitted:B,reset:K,clear:I,validate:F,validated:R,validatedAndSubmitted:z,setValues:S,setErrors:$,setPartialValues:X,"@@unitShape":()=>({errors:c,values:i,isValidationPending:q,isDirty:m,isValid:u,submit:N,validate:F,reset:K,clear:I,setValues:S,setErrors:$,setPartialValues:X})}}},1807:(e,t,r)=>{r.d(t,{Mt:()=>y,mN:()=>k});var n=r(9084),a=r(6540),o=r(2489),s=r(9242),c=r(9888);function i(e,t){const r=o.is.unit(e);let n={};r?n={unit:e}:"@@unitShape"in e?"function"==typeof e["@@unitShape"]?n=e["@@unitShape"]():d("expect @@unitShape to be a function"):n=e;const s=Array.isArray(n),c=a.useRef({stale:1,justSubscribed:0,scope:t}),[i,l,u,f,h]=a.useMemo((()=>{c.current.stale=1;const e=Array.isArray(n)?[]:{},a=[],s=[],i=[],l=[];for(const c in n){if(!{}.hasOwnProperty.call(n,c))continue;const u=n[c];o.is.unit(u)||d(`expect useUnit ${r?"argument":`value in key "${c}"`} to be a unit`),o.is.event(u)||o.is.effect(u)?(e[c]=t?(0,o.GY)(u,{scope:t}):u,i.push(c),l.push(u)):(e[c]=null,a.push(c),s.push(u))}return[e,a,s,i,l]}),[c,t,...Object.keys(n),...Object.values(n)]),g=a.useRef({value:i,storeKeys:l,eventKeys:f,eventValues:h}),v=a.useCallback((e=>{const r=c.current;return r.justSubscribed=1,(0,o.AX)({unit:u,fn:()=>{r.stale||(r.stale=1,e())},scope:t,batch:1})}),[u,t,g,c]),b=a.useCallback((()=>{const e=g.current,n=c.current;let a,o=0;const d=e.value,p=e.storeKeys,v=e.eventKeys,b=e.eventValues,y=t!==n.scope;if(n.stale||n.justSubscribed||y){o=!n.justSubscribed||y,a=s?[...i]:{...i},p.length===l.length&&v.length===f.length||(o=1);for(let e=0;e<l.length;e++){const r=m(u[e],t),n=l[e];o||(o=p.includes(n)?d[n]!==r:1),a[n]=r}for(let e=0;e<f.length;e++){const t=h[e],r=f[e];o||(o=v.includes(r)?b[v.indexOf(r)]!==t:1)}}return o&&(e.value=a),e.storeKeys=l,e.eventKeys=f,e.eventValues=h,n.stale=0,n.justSubscribed=!o,n.scope=t,r?e.value.unit:e.value}),[v,u,h,t,g,c]);return p(v,b,b)}function l(e){const t=a.useContext(g);return e&&!t&&d("No scope found, consider adding <Provider> to app root"),t}function u(e,t){return i(e,l(null==t?void 0:t.forceScope))}function f(){return l()||null}const d=e=>{throw Error(e)},{useSyncExternalStore:p}=("undefined"!=typeof window?a.useLayoutEffect:a.useEffect,c),{useSyncExternalStoreWithSelector:h}=s,m=(e,t)=>t?t.getState(e):e.getState(),g=a.createContext(null),{Provider:v}=g;function b(e,t){const r={};function a(e){return t?t.getState(e):e.getState()}function s(e){return t?(0,o.GY)(e,{scope:t}):e}for(const o in e){const c=e[o];switch(c.type){case n.OD:r[o]={values:a(c.$values).map((e=>(0,n.k8)(e)?e:b(e,t))),isDirty:a(c.$isDirty),isValid:a(c.$isValid),error:a(c.$error),change:s(c.change),changeError:s(c.changeError),reset:s(c.reset),push:s(c.push),swap:s(c.swap),move:s(c.move),insert:s(c.insert),unshift:s(c.unshift),remove:s(c.remove),pop:s(c.pop),replace:s(c.replace)};break;case n.xR:{const e=s(c.change),t=s(c.focus),n=s(c.blur);r[o]={value:a(c.$value),error:a(c.$error),isDirty:a(c.$isDirty),isValid:a(c.$isValid),onChangeError:s(c.changeError),onChange:t=>e(t),onFocus:()=>t(),onBlur:()=>n()};break}default:r[o]=b(e[o],t)}}return r}function y(e){return u(e)}function k(e,t){const r=f(),{values:n,errors:o,...s}=u(e),c=(0,a.useMemo)((()=>b(e.fields,r)),[e.fields,n,o]);return(0,a.useEffect)((()=>()=>{null!=t&&t.resetOnUnmount&&s.reset()}),[]),{values:n,errors:o,fields:c,...s}}},8453:(e,t,r)=>{r.d(t,{R:()=>s,x:()=>c});var n=r(6540);const a={},o=n.createContext(a);function s(e){const t=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),n.createElement(o.Provider,{value:t},e.children)}},2489:(e,t,r)=>{function n(e,t){for(const r in e)t(e[r],r)}function a(e,t){e.forEach(t)}function o(e,t,r){if(!e)throw Error(`${r?r+": ":""}${t}`)}function s(e,t){const r=C(e).meta||{};ae={id:C(e).id,parent:ae,value:e,template:r.template||se(),sidRoot:r.sidRoot||ae&&ae.sidRoot,meta:r};try{return t()}finally{oe("region"),ae=D(ae)}}function c({node:e=[],from:t,source:r,parent:n=t||r,to:o,target:s,child:c=o||s,scope:i={},meta:l={},family:u={type:"regular"},regional:f}={}){const d=le(n),p=le(u.links),h=le(u.owners),m=[];a(e,(e=>e&&Y(m,e)));const g={id:te(),seq:m,next:le(c),meta:l,scope:i,family:{type:u.type||"crosslink",links:p,owners:h}};return a(p,(e=>Y(I(e),g))),a(h,(e=>Y(x(e),g))),a(d,(e=>Y(e.next,g))),f&&ae&&ie(A(ae),[g]),g}function i(e,t,r){let n,o=_e,s=null,c=Ke;if(e.target&&(t=e.params,r=e.defer,n=e.meta,o="page"in e?e.page:o,e.stack&&(s=e.stack),c=N(e)||c,e=e.target),c&&Ke&&c!==Ke&&(Ke=null),Array.isArray(e))for(let a=0;a<e.length;a++)Be("pure",o,C(e[a]),s,t[a],c,n);else Be("pure",o,C(e),s,t,c,n);if(r&&!Te)return;const i={isRoot:Te,currentPage:_e,scope:Ke,isWatch:qe,isPure:Ue};let l,u,f,d,p,h;Te=0;e:for(;d=Ne();){const{idx:e,stack:t,type:r}=d;f=t.node,_e=p=t.page,Ke=N(t),p?h=p.reg:Ke&&(h=Ke.reg);const n=!!p,o=!!Ke,s={fail:0,scope:f.scope};l=u=0;for(let a=e;a<f.seq.length&&!l;a++){const c=f.seq[a];if(c.order){const{priority:n,barrierID:o}=c.order,s=o?p?`${p.fullID}_${o}`:o:0;if(a!==e||r!==n){o?ze.has(s)||(ze.add(s),Fe(a,t,n,o)):Fe(a,t,n,0);continue e}o&&ze.delete(s)}switch(c.type){case"mov":{const e=c.data;let r;switch(e.from){case"stack":r=A(t);break;case"a":case"b":r=t[e.from];break;case"value":r=e.store;break;case"store":if(h&&!h[e.store.id])if(n){const r=We(p,e.store.id);t.page=p=r,r?h=r.reg:o?(Qe(Ke,e.store,0,1,e.softRead),h=Ke.reg):h=void 0}else o&&Qe(Ke,e.store,0,1,e.softRead);r=Ie(h&&h[e.store.id]||e.store)}switch(e.to){case"stack":t.value=r;break;case"a":case"b":t[e.to]=r;break;case"store":Ge(p,Ke,e.target,0).current=r}break}case"compute":const e=c.data;if(e.fn){qe="watch"===f.meta.op,Ue=e.pure;const r=e.safe?(0,e.fn)(A(t),s.scope,t):Ze(s,e.fn,t);e.filter?u=!r:t.value=r,qe=i.isWatch,Ue=i.isPure}}l=s.fail||u}if(Ye&&Ye(t,s),!l){const e=A(t),r=N(t);if(a(f.next,(n=>{Be("child",p,n,t,e,r)})),r){f.meta.needFxCounter&&Be("child",p,r.fxCount,t,e,r),f.meta.storeChange&&Be("child",p,r.storeChange,t,e,r),f.meta.warnSerialize&&Be("child",p,r.warnSerializeNode,t,e,r);const n=r.additionalLinks[f.id];n&&a(n,(n=>{Be("child",p,n,t,e,r)}))}}}Te=i.isRoot,_e=i.currentPage,Ke=N(i)}function l(e,t="combine"){let r=t+"(",a="",o=0;return n(e,(e=>{o<25&&(null!=e&&(r+=a,r+=z(e)?R(e).fullName:e.toString()),o+=1,a=", ")})),r+")"}function u(e,t){let r,n;const a=e;if(t){const a=R(t);0===e.length?(r=a.path,n=a.fullName):(r=a.path.concat([e]),n=0===a.fullName.length?e:a.fullName+"/"+e)}else r=0===e.length?[]:[e],n=e;return{shortName:a,fullName:n,path:r}}function f(e,t){if(!t)return e;if(!t.name&&!t.named&&!t.loc)return e;let r=`[${e}]`;const n=t.named||t.name;n&&(r+=` unit '${n}'`);const a=t.loc;return!n&&a&&(r+=` (${a.file}:${a.line}:${a.column})`),r}function d(e,t){const r=t?e:e[0];pe(r);let n=r.or;const a=r.and;if(a){const r=t?a:a[0];if(ue(r)&&"and"in r){const r=d(a,t);e=r[0],n={...n,...r[1]}}else e=a}return[e,n]}function p(e){const t=()=>e();return t.unsubscribe=()=>e(),t}function h(e,...t){const r=se();if(r){const n=r.handlers[e];if(n)return n(r,...t)}}function m(e,t){const r=et({or:t,and:"string"==typeof e?{name:e}:e}),n=f("event",r),a=(e,...t)=>(o(!B(a,"derived"),"call of derived event is not supported, use createEvent instead",n),o(!Ue,"unit call from pure function is not supported, use operators like sample instead",n),_e?((e,t,r,n)=>{const a=_e;let o=null;if(t)for(o=_e;o&&o.template!==t;)o=D(o);Le(o);const s=e.create(r,n);return Le(a),s})(a,s,e,t):a.create(e,t)),s=se(),l=Object.assign(a,{graphite:c({meta:lt(r.actualOp||"event",a,r),regional:1}),create:e=>(i({target:a,params:e,scope:Ke}),e),watch:e=>ct(a,e),map:e=>ut(a,"map",e,[Oe()]),filter:e=>ut(a,"filter",e.fn?e:e.fn,[Oe(ye,1)]),filterMap:e=>ut(a,"filterMap",e,[Oe(),$e((e=>!de(e)),1)]),prepend(e){o(a.targetable,".prepend of derived event is not supported, call source event instead",n);const t=m("* \u2192 "+a.shortName,{parent:D(a)});return h("eventPrepend",C(t)),st(t,a,[Oe()],"prepend",e),it(a,t),t}});return null!=r&&r.domain&&r.domain.hooks.event(l),F(l,"id",l.graphite.id),oe(l.graphite),l}function g(e,t,r,n,s){return me(r,`${s} ${t}`,"first argument"),o(fe(n),"second argument should be a function",s),J(!B(e,"derived"),`${t} in derived store`,`${t} in store created via createStore`,s),a(Array.isArray(r)?r:[r],(t=>{e.off(t),P(e).set(t,ot(dt(t,e,"on",be,n)))})),e}function v(e,t){const r=et(t),n=Ce(e),s=f("store",r),l=m({named:"updates",derived:1});h("storeBase",n);const u=n.id,d="skipVoid"in r,p=d&&!r.skipVoid;J(!(d&&r.skipVoid),"{skipVoid: true}","updateFilter",s);const b={subscribers:new Map,updates:l,defaultState:e,stateRef:n,getState(){let e,t=n;if(_e){let t=_e;for(;t&&!t.reg[u];)t=D(t);t&&(e=t)}return!e&&Ke&&(Qe(Ke,n,1),e=Ke),e&&(t=e.reg[u]),Ie(t)},setState:e=>i({target:b,params:e,defer:1,scope:Ke}),reset:(...e)=>(o(b.targetable,".reset of derived store is not supported",s),a(e,(e=>g(b,".reset",e,(()=>b.defaultState),s))),b),on:(e,t)=>(o(b.targetable,".on of derived store is not supported",s),g(b,".on",e,t,s)),off(e){const t=P(b).get(e);return t&&(t(),P(b).delete(e)),b},map(e,t){let r,a;ue(e)&&(r=e,e=e.fn);const o=b.getState(),s=de(o);se()?a=null:(!s||s&&p)&&(a=e(o));const c=v(a,{name:`${b.shortName} \u2192 *`,derived:1,...t,and:r}),i=dt(b,c,"map",ye,e);return xe(j(c),{type:"map",fn:e,from:n}),j(c).noInit=1,h("storeMap",n,i),c},watch(e,t){if(J(!t,"watch second argument","sample",s),!t||!z(e)){const t=ct(b,e);return h("storeWatch",n,e)||e(b.getState()),t}return o(fe(t),"second argument should be a function",s),e.watch((e=>t(b.getState(),e)))}},y=lt("store",b,r),k=b.defaultConfig.updateFilter;b.graphite=c({scope:{state:n,fn:k},node:[$e(((e,t,r)=>(r.scope&&!r.scope.reg[n.id]&&(r.b=1),e))),we(n),$e(((e,t,{a:r,b:n})=>{const a=de(e);return a&&!d&&console.error(`${s}: ${ft}`),(a&&p||!a)&&(e!==r||n)}),1),k&&Oe(ve,1),Ee({from:"stack",target:n})],child:l,meta:{...y,defaultState:e},regional:1}),F(b,"id",b.graphite.id),F(b,"rootStateRefId",u);const M=B(b,"serialize"),E=B(b,"derived"),S="ignore"===M,X=B(b,"sid");X&&(F(b,"storeChange",1),n.sid=X),X||S||E||F(b,"warnSerialize",1);const $=de(e);return o(E||!$||$&&p,ft,s),E&&$&&!d&&console.error(`${s}: ${ft}`),ie(b,[l]),null!=r&&r.domain&&r.domain.hooks.store(b),E||(b.reinit=m({named:"reinit"}),b.reset(b.reinit)),n.meta=b.graphite.meta,oe(b.graphite),b}function b(...e){let t,r,n;[e,n]=d(e);const a=f("combine",n),s=e[e.length-1],c=!T(s)&&ue(s),i=c&&s,l=c?e[e.length-2]:s;let u,p,h;if(fe(l)?(r=e.slice(0,c?-2:-1),t=l):r=e,1===r.length){const e=r[0];T(e)||(u=e,p=1)}if(!p&&(u=r,t)){h=1;const e=t;t=t=>e(...t)}return o(ue(u),`${a}: shape should be an object`),pt(Array.isArray(u),!h,u,n,t,i)}function y(){const e={};return e.req=new Promise(((t,r)=>{e.rs=t,e.rj=r})),e.req.catch((()=>{})),e}function k(e,t={}){const r=et(fe(e)?{handler:e}:e,t),n=f("effect",r),a=m(fe(e)?{handler:e}:e,{...t,actualOp:"effect"}),s=C(a);F(s,"op",a.kind="effect"),a.use=e=>(o(fe(e),".use argument should be a function",n),g.scope.handler=e,a),a.use.getCurrent=()=>g.scope.handler;const l=a.finally=m({named:"finally",derived:1}),u=a.done=l.filterMap({named:"done",fn({status:e,params:t,result:r}){if("done"===e)return{params:t,result:r}}}),d=a.fail=l.filterMap({named:"fail",fn({status:e,params:t,error:r}){if("fail"===e)return{params:t,error:r}}}),p=a.doneData=u.map({named:"doneData",fn:({result:e})=>e}),h=a.failData=d.map({named:"failData",fn:({error:e})=>e}),g=c({scope:{handler:a.defaultConfig.handler||(()=>o(0,`no handler used in ${a.compositeName.fullName}`))},node:[$e(((e,t,r)=>{let n=t.handler;const o=N(r);if(o){const e=o.handlers.unitMap.get(a)||o.handlers.sidMap[a.sid];e&&(n=e)}return e.handler=n,e}),0,1),$e(((e,t,r)=>{if(t.runnerFn&&!t.runnerFn(e,null,r))return;const{params:n,req:a,handler:o,args:s=[n]}=e,c=mt(n,a,1,l,r),i=mt(n,a,0,l,r),[u,f]=ht(o,i,s);u&&(ue(f)&&fe(f.then)?f.then(c,i):c(f))}),0,1)],meta:{op:"fx",fx:"runner"}});s.scope.runner=g,Y(s.seq,$e(((e,{runner:t},r)=>{const n=D(r)?{params:e,req:{rs(e){},rj(e){}}}:e;return r.meta||(r.meta={fxID:re()}),i({target:t,params:n,defer:1,scope:N(r),meta:r.meta}),n.params}))),a.create=e=>{const t=y(),r={params:e,req:t};if(Ke&&!qe){const e=Ke;t.req.finally((()=>{He(e)})).catch((()=>{}))}return i({target:a,params:r,scope:Ke}),t.req};const b=a.inFlight=v(0,{serialize:"ignore",named:(B(a,"name")||a.graphite.id)+".inFlight"}).on(a,(e=>e+1)).on(l,(e=>e-1)).map({fn:e=>e,named:"inFlight"});F(l,"needFxCounter","dec"),F(a,"needFxCounter",1);const k=a.pending=b.map({fn:e=>e>0,named:"pending"});return ie(a,[l,u,d,p,h,k,b]),null!=r&&r.domain&&r.domain.hooks.effect(a),a}function M(e){let t;[e,t]=d(e,1);const r=f("attach",t);let{source:n,effect:a,mapParams:s,domain:c}=e;U(a)&&o(de(c),"`domain` can only be used with a plain function",r);const l=k(e,t);F(l,"attached",1);const{runner:p}=C(l).scope;let h;const m=(e,t,r)=>{const{params:a,req:o,handler:c}=e,u=l.finally,f=mt(a,o,0,u,r),d=r.a,p=U(c);let h,m=1;if(s?[m,h]=ht(s,f,[a,d]):h=n&&p?d:a,m){if(!p)return e.args=[d,h],1;i({target:c,params:{params:h,req:{rs:mt(a,o,1,u,r),rj:f}},page:r.page,defer:1,meta:r.meta})}};if(n){let e;p.scope.runnerFn=m,T(n)?(e=n,ie(e,[l])):(e=b(n),ie(l,[e])),h=[$e((e=>e),0,1),we(j(e))],delete p.seq[1].order}else h=[$e(m,1,1)];p.seq.splice(1,0,...h),l.use(a);const g=D(a);return g&&(Object.assign(R(l),u(l.shortName,g)),l.defaultConfig.parent=g),it(a,l,"effect"),l}function E(e,t){const r=f("merge",t);me(e,r,"first argument");const n=m({name:l(e,"merge"),derived:1,and:t});return st(e,n,[],"merge"),n}function S(e,t){let r=0;return a(vt,(n=>{n in e&&(o(null!=e[n],bt(t,n)),r=1)})),r}function X(...e){let t,r,n,a,[[o,s,c],i]=d(e),l=1;const u=f("sample",i);return de(s)&&ue(o)&&S(o,u)&&(s=o.clock,c=o.fn,"batch"in o?l=o.batch:(J(!("greedy"in o),"greedy in sample","batch",u),l=!o.greedy),a=o.filter,t=o.target,r=o.name,n=o.sid,o=o.source),yt("sample",s,o,a,t,c,r,i,l,1,0,n)}function $(e,{scope:t,safe:r}={}){o(t||Ke||r,"scopeBind: scope not found");const n=t||Ke;return t=>{function r(){He(s)}let a,o=0;const s=Ke;He(n);try{a=e(t)}catch(e){a=e,o=1}if(r(),o)throw a;return a instanceof Promise&&a.then(r,r),a}}function w({unit:e,fn:t,scope:r,batch:n}){const a=[Ve.run({fn:e=>t(e)})];n&&a.unshift(Ve.compute({priority:"sampler",batch:1})),T(e)&&a.unshift(Ve.mov({store:e.stateRef,to:"stack"}));const o=Array.isArray(e)?e:[e];if(r){const e=[],t=r.additionalLinks;return o.forEach((r=>{const n=t[r.graphite.id]||[];t[r.graphite.id]=n;const o=c({node:O(a,r),meta:{watchOp:r.kind}});n.push(o),e.push((()=>{const e=n.indexOf(o);-1!==e&&n.splice(e,1),at(o)}))})),p((()=>{e.forEach((e=>e()))}))}{const e=c({node:a,parent:o,family:{owners:o}});return p((()=>{at(e)}))}}function O(e,t){return T(t)?[Ve.mov({store:t.stateRef,to:"stack"}),...e]:e}r.d(t,{AX:()=>w,EH:()=>k,GY:()=>$,K0:()=>M,Ns:()=>s,XM:()=>X,is:()=>W,kg:()=>b,lh:()=>m,w_:()=>at,y$:()=>v});const V="undefined"!=typeof Symbol&&Symbol.observable||"@@observable",C=e=>e.graphite||e,I=e=>e.family.owners,x=e=>e.family.links,j=e=>e.stateRef,A=e=>e.value,P=e=>e.subscribers,D=e=>e.parent,N=e=>e.scope,B=(e,t)=>C(e).meta[t],F=(e,t,r)=>C(e).meta[t]=r,R=e=>e.compositeName,z=e=>(fe(e)||ue(e))&&"kind"in e,K=e=>t=>z(t)&&t.kind===e,T=K("store"),q=K("event"),U=K("effect"),_=e=>z(e)&&!!e.targetable,H=K("domain"),L=K("scope");var W={__proto__:null,unit:z,store:T,event:q,effect:U,targetable:_,domain:H,scope:L,attached:e=>U(e)&&1==B(e,"attached")};const G=(e,t)=>{const r=e.indexOf(t);-1!==r&&e.splice(r,1)},Y=(e,t)=>e.push(t),J=(e,t,r,n)=>!e&&console.error(`${n?n+": ":""}${t} is deprecated${r?`, use ${r} instead`:""}`),Q=()=>{let e=0;return()=>""+ ++e},Z=Q(),ee=Q(),te=Q(),re=Q();let ne;let ae=null;const oe=e=>{ne&&ne(e,ae)},se=()=>ae&&ae.template,ce=e=>(e&&ae&&ae.sidRoot&&(e=`${ae.sidRoot}|${e}`),e),ie=(e,t)=>{const r=C(e);a(t,(e=>{const t=C(e);"domain"!==r.family.type&&(t.family.type="crosslink"),Y(I(t),r),Y(x(r),t)}))},le=(e=[])=>(Array.isArray(e)?e:[e]).flat().map(C),ue=e=>"object"==typeof e&&null!==e,fe=e=>"function"==typeof e,de=e=>void 0===e,pe=e=>o(ue(e)||fe(e),"expect first argument be an object"),he=(e,t,r,n)=>o(!(!ue(e)&&!fe(e)||!("family"in e)&&!("graphite"in e)),`${t}: expect ${r} to be a unit (store, event or effect)${n}`),me=(e,t,r)=>{Array.isArray(e)?a(e,((e,n)=>he(e,t,`${n} item of ${r}`,""))):he(e,t,r," or array of units")},ge=(e,t,r="target")=>a(le(t),(t=>o(!B(t,"derived"),`${e}: derived unit in "${r}" is not supported, use createStore/createEvent instead"`))),ve=(e,{fn:t},{a:r})=>t(e,r),be=(e,{fn:t},{a:r})=>t(r,e),ye=(e,{fn:t})=>t(e),ke=(e,t,r,n)=>{const a={id:ee(),type:e,data:t};return r&&(a.order={priority:r},n&&(a.order.barrierID=++Me)),a};let Me=0;const Ee=({from:e="store",store:t,target:r,to:n=(r?"store":"stack"),batch:a,priority:o})=>ke("mov",{from:e,store:t,to:n,target:r},o,a),Se=({fn:e,batch:t,priority:r,safe:n=0,filter:a=0,pure:o=0})=>ke("compute",{fn:e,safe:n,filter:a,pure:o},r,t),Xe=({fn:e})=>Se({fn:e,priority:"effect"}),$e=(e,t,r)=>Se({fn:e,safe:1,filter:t,priority:r&&"effect"}),we=(e,t,r)=>Ee({store:e,to:t?"stack":"a",priority:r&&"sampler",batch:1}),Oe=(e=ye,t)=>Se({fn:e,pure:1,filter:t}),Ve={mov:Ee,compute:Se,filter:({fn:e,pure:t})=>Se({fn:e,filter:1,pure:t}),run:Xe},Ce=e=>({id:ee(),current:e,initial:e}),Ie=({current:e})=>e,xe=(e,t)=>{e.before||(e.before=[]),Y(e.before,t)};let je=null;const Ae=(e,t)=>{if(!e)return t;if(!t)return e;let r;return(e.v.type===t.v.type&&e.v.id>t.v.id||Re(e.v.type)>Re(t.v.type))&&(r=e,e=t,t=r),r=Ae(e.r,t),e.r=e.l,e.l=r,e},Pe=[];let De=0;for(;De<6;)Y(Pe,{first:null,last:null,size:0}),De+=1;const Ne=()=>{for(let e=0;e<6;e++){const t=Pe[e];if(t.size>0){if(3===e||4===e){t.size-=1;const e=je.v;return je=Ae(je.l,je.r),e}1===t.size&&(t.last=null);const r=t.first;return t.first=r.r,t.size-=1,r.v}}},Be=(e,t,r,n,a,o,s)=>Fe(0,{a:null,b:null,node:r,parent:n,value:a,page:t,scope:o,meta:s},e,0),Fe=(e,t,r,n)=>{const a=Re(r),o=Pe[a],s={v:{idx:e,stack:t,type:r,id:n},l:null,r:null};3===a||4===a?je=Ae(je,s):(0===o.size?o.first=s:o.last.r=s,o.last=s),o.size+=1},Re=e=>{switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},ze=new Set;let Ke,Te=1,qe=0,Ue=0,_e=null;const He=e=>{Ke=e},Le=e=>{_e=e},We=(e,t)=>{if(e){for(;e&&!e.reg[t];)e=e.parent;if(e)return e}return null},Ge=(e,t,r,n)=>{const a=We(e,r.id);return a?a.reg[r.id]:t?(Qe(t,r,n),t.reg[r.id]):r};let Ye;const Je=e=>e,Qe=(e,t,r,n,o)=>{const s=e.reg;if(s[t.id])return;const c=t.sid,i={id:t.id,current:t.initial,meta:t.meta};if(i.id in e.values.idMap)i.current=e.values.idMap[i.id];else if(c&&c in e.values.sidMap&&!(c in e.sidIdMap)){var l;const r=null==t||null===(l=t.meta)||void 0===l?void 0:l.serialize;i.current=(e.fromSerialize&&"ignore"!==r&&(null==r?void 0:r.read)||Je)(e.values.sidMap[c])}else if(t.before&&!o){let o=0;const c=r||!t.noInit||n;a(t.before,(t=>{switch(t.type){case"map":{const a=t.from;if((a||t.fn)&&(a&&Qe(e,a,r,n),c)){const e=a&&s[a.id].current;i.current=t.fn?t.fn(e):e}break}case"field":Qe(e,t.from,r,n),o||(o=1,i.current=Array.isArray(i.current)?[...i.current]:{...i.current}),c&&(i.current[t.field]=s[s[t.from.id].id].current)}}))}c&&(e.sidIdMap[c]=t.id),s[t.id]=i},Ze=(e,t,r)=>{try{return t(A(r),e.scope,r)}catch(t){console.error(t),e.fail=1,e.failReason=t}},et=(e,t={})=>(ue(e)&&(et(e.or,t),n(e,((e,r)=>{de(e)||"or"===r||"and"===r||(t[r]=e)})),et(e.and,t)),t),tt=(e,t)=>{G(e.next,t),G(I(e),t),G(x(e),t)},rt=(e,t,r)=>{let n;e.next.length=0,e.seq.length=0,e.scope=null;let a=x(e);for(;n=a.pop();)tt(n,e),(t||r&&"sample"!==e.meta.op||"crosslink"===n.family.type)&&rt(n,t,"on"!==n.meta.op&&r);for(a=I(e);n=a.pop();)tt(n,e),r&&"crosslink"===n.family.type&&rt(n,t,"on"!==n.meta.op&&r)},nt=e=>e.clear(),at=(e,{deep:t}={})=>{let r=0;if(e.ownerSet&&e.ownerSet.delete(e),T(e))nt(P(e));else if(H(e)){r=1;const t=e.history;nt(t.events),nt(t.effects),nt(t.stores),nt(t.domains)}rt(C(e),!!t,r)},ot=e=>p((()=>at(e))),st=(e,t,r,n,a)=>c({node:r,parent:e,child:t,scope:{fn:a},meta:{op:n},family:{owners:[e,t],links:t},regional:1}),ct=(e,t)=>(o(fe(t),".watch argument should be a function"),ot(c({scope:{fn:t},node:[Xe({fn:ye})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))),it=(e,t,r="event")=>{D(e)&&D(e).hooks[r](t)},lt=(e,t,r)=>{const n=et(r),a="domain"===e,o=Z(),{sid:s=null,named:c=null,domain:i=null,parent:l=i}=n,f=c||n.name||(a?"":o),d=u(f,l),p={op:t.kind=e,name:t.shortName=f,sid:t.sid=ce(s),named:c,unitId:t.id=o,serialize:n.serialize,derived:n.derived,config:n};if(t.targetable=!n.derived,t.parent=l,t.compositeName=d,t.defaultConfig=n,t.getType=()=>(J(0,"getType","compositeName.fullName"),d.fullName),!a){t.subscribe=e=>(pe(e),t.watch(fe(e)?e:t=>e.next&&e.next(t))),t[V]=()=>t;const e=se();e&&(p.nativeTemplate=e)}return p},ut=(e,t,r,n)=>{let a;ue(r)&&(a=r,r=r.fn);const o=m({name:`${e.shortName} \u2192 *`,derived:1,and:a});return st(e,o,n,t,r),o},ft="undefined is used to skip updates. To allow undefined as a value provide explicit { skipVoid: false } option",dt=(e,t,r,n,a)=>{const o=j(t),s=Ee({store:o,to:"a",priority:"read"});"map"===r&&(s.data.softRead=1);const c=[s,Oe(n)];return h("storeOnMap",o,c,T(e)&&j(e)),st(e,t,c,r,a)},pt=(e,t,r,a,s,c)=>{const i=f("combine",a),u=e?e=>[...e]:e=>({...e}),d=e?[]:{},p=u(d),m=Ce(p),g=Ce(1);m.type=e?"list":"shape",m.noInit=1,h("combineBase",m,g);const b=v(p,{name:l(r),derived:1,...c,and:a}),y=j(b);y.noInit=1,F(b,"isCombine",1);const k=we(m);k.order={priority:"barrier"};const M=Ee({store:y,to:"b",priority:"read"});M.data.softRead=1;const E=[$e(((e,t,r)=>(r.scope&&!r.scope.reg[m.id]&&(r.c=1),e))),k,Ee({store:g,to:"b"}),$e(((e,{key:r},n)=>{if(n.c||e!==n.a[r])return t&&n.b&&(n.a=u(n.a)),n.a[r]=e,1}),1),Ee({from:"a",target:m}),Ee({from:"value",store:0,target:g}),Ee({from:"value",store:1,target:g,priority:"barrier",batch:1}),we(m,1,1),s&&Oe(),M];if(n(r,((e,t)=>{if(!T(e))return o(!z(e)&&!de(e),`combine expects a store in a field ${t}`,i),void(p[t]=d[t]=e);d[t]=e.defaultState,p[t]=e.getState();const r=st(e,b,E,"combine",s);r.scope.key=t;const n=j(e);xe(m,{type:"field",field:t,from:n}),h("combineField",n,r)})),b.defaultShape=r,xe(y,{type:"map",from:m,fn:s}),!se())if(s){const e=s(p);!de(e)||c&&"skipVoid"in c||console.error(`${i}: ${ft}`),y.current=e,y.initial=e,b.defaultState=e}else b.defaultState=d;return b},ht=(e,t,r)=>{try{return[1,e(...r)]}catch(e){return t(e),[0,null]}},mt=(e,t,r,n,a)=>o=>{i({target:[n,gt],params:[r?{status:"done",params:e,result:o}:{status:"fail",params:e,error:o},{value:o,fn:r?t.rs:t.rj}],defer:1,page:a.page,scope:a.scope,meta:a.meta})},gt=c({node:[Xe({fn:({fn:e,value:t})=>e(t)})],meta:{op:"fx",fx:"sidechain"}}),vt=["source","clock","target"],bt=(e,t)=>e+`: ${t} should be defined`,yt=(e,t,r,n,a,s,c,i,l,u,d,p)=>{const g=f(e,i),y=!!a;o(!de(r)||!de(t),bt(g,"either source or clock"));let k=0;de(r)?k=1:z(r)||(r=b(r)),de(t)?t=r:(me(t,g,"clock"),Array.isArray(t)&&(t=E(t))),k&&(r=t),i||c||(c=r.shortName);let M="none";(d||n)&&(z(n)?M="unit":(o(fe(n),"`filter` should be function or unit"),M="fn")),a?(me(a,g,"target"),ge(g,a)):"none"===M&&u&&T(r)&&T(t)?a=v(s?s(Ie(j(r)),Ie(j(t))):Ie(j(r)),{name:c,sid:p,or:i}):(a=m({name:c,derived:1,or:i}),h("sampleTarget",C(a)));const S=Ce();let X=[];if("unit"===M){const[r,o,s]=Mt(n,a,t,S,e);s||X.push(...kt(o)),X.push(...kt(r))}const $=[];if(k)l&&$.push(we(S,1,1));else{const[n,o,s]=Mt(r,a,t,S,e);s||$.push(...kt(o)),$.push(we(n,1,l))}const w=st(t,a,[h("sampleSourceLoader"),Ee({from:"stack",target:S}),...$,...X,we(S),"fn"===M&&Oe(((e,t,{a:r})=>n(e,r)),1),s&&Oe(ve),h("sampleSourceUpward",y)],e,s);return ie(r,[w]),Object.assign(w.meta,i,{joint:1}),a},kt=e=>[we(e),$e(((e,t,{a:r})=>r),1)],Mt=(e,t,r,n,a)=>{const o=T(e),s=o?j(e):Ce(),i=Ce(o);return o||c({parent:e,node:[Ee({from:"stack",target:s}),Ee({from:"value",store:1,target:i})],family:{owners:[e,t,r],links:t},meta:{op:a},regional:1}),h("sampleSource",i,s,n),[s,i,o]}}}]);