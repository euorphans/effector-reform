/*! For license information please see 449.8a159d06.js.LICENSE.txt */
"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[449],{1063:(e,r,t)=>{var n=t(6540);var a="function"==typeof Object.is?Object.is:function(e,r){return e===r&&(0!==e||1/e==1/r)||e!=e&&r!=r},o=n.useState,s=n.useEffect,c=n.useLayoutEffect,l=n.useDebugValue;function i(e){var r=e.getSnapshot;e=e.value;try{var t=r();return!a(e,t)}catch(n){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,r){return r()}:function(e,r){var t=r(),n=o({inst:{value:t,getSnapshot:r}}),a=n[0].inst,u=n[1];return c((function(){a.value=t,a.getSnapshot=r,i(a)&&u({inst:a})}),[e,t,r]),s((function(){return i(a)&&u({inst:a}),e((function(){i(a)&&u({inst:a})}))}),[e]),l(t),t};r.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:u},8940:(e,r,t)=>{var n=t(6540),a=t(9888);var o="function"==typeof Object.is?Object.is:function(e,r){return e===r&&(0!==e||1/e==1/r)||e!=e&&r!=r},s=a.useSyncExternalStore,c=n.useRef,l=n.useEffect,i=n.useMemo,u=n.useDebugValue;r.useSyncExternalStoreWithSelector=function(e,r,t,n,a){var f=c(null);if(null===f.current){var d={hasValue:!1,value:null};f.current=d}else d=f.current;f=i((function(){function e(e){if(!l){if(l=!0,s=e,e=n(e),void 0!==a&&d.hasValue){var r=d.value;if(a(r,e))return c=r}return c=e}if(r=c,o(s,e))return r;var t=n(e);return void 0!==a&&a(r,t)?r:(s=e,c=t)}var s,c,l=!1,i=void 0===t?null:t;return[function(){return e(r())},null===i?void 0:function(){return e(i())}]}),[r,t,n,a]);var p=s(e,f[0],f[1]);return l((function(){d.hasValue=!0,d.value=p}),[p]),u(p),p}},9888:(e,r,t)=>{e.exports=t(1063)},9242:(e,r,t)=>{e.exports=t(8940)},9084:(e,r,t)=>{t.d(r,{OD:()=>y,mJ:()=>P,Fv:()=>p,DG:()=>R,tZ:()=>v,sw:()=>f});var n=t(2489),a={}.hasOwnProperty,o=(e,r)=>a.call(e,r);function s(e){var r=function(e){return Object.keys(e).some((r=>!["targets","source"].includes(r)&&n.is.unit(e[r])))}(e)?{targets:e}:e,{targets:t,source:a=(0,n.lh)({name:"source",sid:"e9ipnn"})}=r,s=function(e){if(o(t,e)){var r=t[e],s=(0,n.XM)({and:[{source:a,batch:!1,filter:r=>"object"==typeof r&&null!==r&&e in r}],or:{name:"hasTargetKey",sid:"eapc0z"}});(0,n.XM)({and:[{batch:!1,clock:s,fn:r=>r[e],target:r}],or:{sid:"mkzcy4"}})}};for(var c in t)s(c);return a}function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function l(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function i(e){var r=function(e){return Object.keys(e).some((r=>!["events","reset","target"].includes(r)&&n.is.unit(e[r])))}(e)?{events:e}:e,{events:t,reset:a,target:o=(0,n.lh)({name:"target",sid:"p73fff"})}=r;return n.is.unit(o)&&n.is.targetable(o)||u("target should be a targetable unit"),a&&!n.is.unit(a)&&u("reset should be a unit"),(0,n.Ns)(o,(()=>{var e=Object.keys(t),r=Array.isArray(t)?[...e].fill(""):{},s=(0,n.y$)(e.length,{and:{serialize:"ignore"},name:"$counter",sid:"-ahoahx"}),i=(0,n.y$)(r,{and:{serialize:"ignore"},name:"$results",sid:"oy8iyn"});(0,n.XM)({and:[{source:o,target:s.reinit}],or:{sid:"blex0c"}}),i.reset(o),a&&((0,n.XM)({and:[{source:a,target:s.reinit}],or:{sid:"bnm3fi"}}),i.reset(a));var u=function(e){var r=(0,n.y$)(!1,{and:{serialize:"ignore"},name:"$isDone",sid:"-rf2fac"}).on(t[e],(()=>!0)).reset(o);a&&r.reset(a),s.on(r,(e=>e-1)),i.on(t[e],((r,t)=>{var n=Array.isArray(r)?[...r]:function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach((function(r){l(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},r);return n[e]=t,n}))};for(var f of e)u(f);var d=(0,n.XM)({and:[{source:i,clock:[...Object.values(t)]}],or:{name:"eventsTrriggered",sid:"-lro8bq"}});(0,n.XM)({and:[{source:d,filter:s.map((e=>0===e),{skipVoid:!1}),target:o}],or:{sid:"-dlkr2s"}})})),o}function u(e){throw new Error(e)}const f=Symbol("primitive-field"),d={error:null,forkOnCreateForm:!0};function p(e,r){const t=!(null==r||!r.clearOuterErrorOnChange),a={...d,...r},o=(0,n.y$)(e,{name:"<field value>"}),c=(0,n.y$)(null,{name:"<inner field error>"}),l=(0,n.y$)((null==r?void 0:r.error)??null,{name:"<outer field error>"}),i=(0,n.kg)({innerError:c,outerError:l}).map((({innerError:e,outerError:r})=>r||e)),u=i.map((e=>null===e)),h=(0,n.y$)(!1),m=(0,n.y$)(!1),g=(0,n.lh)("<field change>"),v=(0,n.lh)("<field changed>"),b=(0,n.lh)(),y=(0,n.lh)(),k=(0,n.lh)(),M=(0,n.lh)(),S=(0,n.lh)("<field setError>"),$=(0,n.lh)("<field error changed>"),E=(0,n.lh)(),X=(0,n.lh)(),w=(0,n.lh)("<field reset>"),O=(0,n.lh)("<field reset completed>"),I=(0,n.lh)(),V=(0,n.lh)(),C=(0,n.lh)(),j=(0,n.lh)();return t&&(0,n.XM)({clock:o,fn:()=>null,target:l}),(0,n.XM)({clock:b,fn:()=>!1,target:m}),(0,n.XM)({clock:k,fn:()=>!0,target:m}),(0,n.XM)({clock:m,filter:e=>e,target:M}),(0,n.XM)({clock:m,filter:e=>!e,target:y}),(0,n.XM)({clock:E,target:c}),(0,n.XM)({clock:S,target:l}),(0,n.XM)({clock:g,target:o}),(0,n.XM)({clock:o,fn:()=>!0,target:h}),(0,n.XM)({clock:C,fn:e=>e.value,target:o}),(0,n.XM)({clock:I,fn:e=>e.value,target:c}),(0,n.XM)({clock:V,fn:e=>e.value,target:l}),(0,n.XM)({clock:o,target:v}),(0,n.XM)({clock:S,target:l}),(0,n.XM)({clock:i,target:$}),(0,n.XM)({clock:E,target:c}),(0,n.XM)({clock:[w,j],fn:()=>({value:e,error:(null==r?void 0:r.error)??null,isDirty:!1}),target:s({value:o,error:l,isDirty:h})}),(0,n.XM)({clock:[w,j],target:O}),{type:f,batchedSetInnerError:I,batchedSetOuterError:V,batchedSetValue:C,batchedReset:j,$value:o,$outerError:l,$innerError:c,$error:i,$isValid:u,$isDirty:h,$isFocused:m,blur:b,blurred:y,focus:k,focused:M,change:g,changed:v,changeError:S,errorChanged:$,reset:w,resetCompleted:O,setInnerError:E,setOuterError:X,forkOnCreateForm:a.forkOnCreateForm,fork:t=>p(e,{...r,...t}),"@@unitShape":()=>({value:o,error:i,isValid:u,isDirty:h,isFocused:m,blur:b,blurred:y,focus:k,focused:M,changeError:S,change:g,reset:w})}}function h(e,r=!1){for(const t of e)(0,n.w_)(t,{deep:r})}function m(e){return"type"in e&&e.type===f}function g(e){return"boolean"==typeof e||"string"==typeof e||"number"==typeof e}function v(e){const r=typeof File<"u"&&e instanceof File,t=typeof Buffer<"u"&&e instanceof Buffer,n=typeof FileList<"u"&&e instanceof FileList;return g(e)||"bigint"==typeof e||t||r||n||e instanceof Date||e instanceof Blob||e instanceof ArrayBuffer||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof BigInt64Array}function b(e,r=!1){const t=e;h([e.$value,e.$error,e.change,e.changeError,e.errorChanged,e.changed,e.cleared,e.clear,e.reset,e.resetCompleted,t.$outerError,t.$innerError,t.setInnerError,t.batchedSetValue,t.batchedSetOuterError,t.batchedSetInnerError,t.batchedClear,t.batchedReset],r)}const y=Symbol("array-field");function k(e,r=!1){const t=e;h([t.$values,t.$error,t.change,t.changed,t.changeError,t.errorChanged,t.insert,t.inserted,t.move,t.moved,t.pop,t.popped,t.push,t.pushed,t.remove,t.removed,t.replace,t.replaced,t.swap,t.swapped,t.unshift,t.unshifted,t.clear,t.cleared,t.reset,t.resetCompleted,t.setInnerError,t.batchedSetValue,t.batchedSetOuterError,t.batchedSetInnerError,t.batchedClear,t.batchedReset],r)}function M(e){if(!v(e))for(const r in e){const t=e[r];switch(t.type){case y:{const e=t.$values.getState();for(const r of e){if(v(r))break;M(r)}k(t);break}case f:b(t);break;default:M(t)}}}function S(e){return"type"in e&&e.type===y}function $(e,r){return{id:Math.random().toString(),type:r,fields:e}}function E(e){return Object.values(e).reduce(((e,r)=>(0===r.fields.length&&e.tasks.push(r),"values"===r.type&&"all"!==e.updateType?e.updateType="error"===e.updateType?"all":"value":"errors"===r.type&&"all"!==e.updateType?e.updateType="value"===e.updateType?"all":"error":("reset"===r.type||"all"===r.type)&&(e.updateType="all"),e)),{tasks:[],updateType:"none"})}function X(e,r){const t=e[r];if(!t)throw new Error(`unknown field with path ${r}`);if("array-field"!==t.type)throw new Error(`expected field type "array-field", received "${t.type}"`);return t}function w({field:e,path:r,key:t,resultErrorsNode:a,resultValuesNode:o,map:s}){const c=e,l=c.$values.getState(),u=[...r,t].join(".");o[t]=[],a[t]={error:null,errors:[]};const f=e=>{e.map(((e,n)=>{v(e)?o[t].push(e):(o[t].push({}),a[t].errors.push({}),s.call(this,e,o[t][n],a[t].errors[n],[...r,t,n.toString()]))}))};f(l);const d=(0,n.EH)((({values:e})=>{X(this.api,u).clearValuesMemory(),o[t]=[],a[t]={error:null,errors:[]},f(e)})),p=(0,n.EH)((({error:e})=>{a[t].error=e})),m=(0,n.EH)((()=>{X(this.api,u).clearValuesMemory(),o[t]=[],a[t]={error:null,errors:[]}})),g=(0,n.EH)((({error:e,values:r})=>{X(this.api,u).clearValuesMemory(),o[t]=[],a[t]={error:e,errors:[]},f(r)}));(0,n.XM)({clock:[i([c.setInnerError,c.errorChanged]),i([c.changeError,c.errorChanged])],source:c.$error,fn:e=>({error:e}),target:p}),(0,n.XM)({clock:[i([c.change,c.changed]),i([c.pushed,c.changed]),i([c.swapped,c.changed]),i([c.moved,c.changed]),i([c.inserted,c.changed]),i([c.unshifted,c.changed]),i([c.removed,c.changed]),i([c.popped,c.changed]),i([c.replaced,c.changed])],source:c.$values,fn:e=>({values:e}),target:d}),(0,n.XM)({clock:i([c.reset,c.resetCompleted]),source:[c.$values,c.$error],fn:([e,r])=>({values:e,error:r}),target:g}),(0,n.XM)({clock:i([c.clear,c.cleared]),fn:()=>({}),target:m}),(0,n.XM)({clock:i([c.batchedClear,c.cleared]),fn:([{"@@batchInfo":e}])=>({batchInfo:e}),target:m}),(0,n.XM)({clock:i([c.batchedReset,c.resetCompleted]),fn:([{"@@batchInfo":e},{values:r,error:t}])=>({values:r,error:t,batchInfo:e}),target:g}),(0,n.XM)({clock:i([c.batchedSetValue,c.changed]),source:c.$values,fn:(e,[{"@@batchInfo":r}])=>({values:e,batchInfo:r}),target:d}),(0,n.XM)({clock:c.batchedSetInnerError,source:c.$outerError,fn:(e,{value:r,"@@batchInfo":t})=>({error:e??r,batchInfo:t}),target:p}),(0,n.XM)({clock:c.batchedSetOuterError,fn:({value:e,"@@batchInfo":r})=>({error:e,batchInfo:r}),target:p}),(0,n.XM)({clock:p.done,filter:({params:e})=>!e.batchInfo,fn:()=>({fieldPath:u,type:"error"}),target:this.schemaUpdated}),(0,n.XM)({clock:[d.done,p.done,g.done,m.done],filter:({params:e})=>!!e.batchInfo,fn:({params:e})=>({fieldPath:u,"@@batchInfo":e.batchInfo}),target:this.batchedSchemaUpdated}),(0,n.XM)({clock:d.done,filter:({params:e})=>!e.batchInfo,fn:()=>({fieldPath:u,type:"value"}),target:this.schemaUpdated}),this.api[u]={type:"array-field",reset:c.reset,clear:c.clear,batchedSetValue:c.batchedSetValue,batchedSetOuterError:c.batchedSetOuterError,batchedSetInnerError:c.batchedSetInnerError,batchedReset:c.batchedReset,batchedClear:c.batchedClear,clearMemory:()=>{k(c,!0),h([p,d,m,g],!0)},clearValuesMemory:()=>{const e=Object.keys(this.api).filter((e=>e.startsWith(u))).filter((e=>e!==u));for(const r of e)this.api[r].clearMemory()},clearInnerError:c.setInnerError.prepend((()=>null)),clearOuterError:c.changeError.prepend((()=>null)),setInnerError:c.setInnerError,setOuterError:c.changeError,setValue:c.change}}function O({resultValuesNode:e,resultErrorsNode:r,field:t,key:a,path:o}){const s=t;e[a]=s.$value.getState(),r[a]=s.$error.getState();const c=[...o,a].join(".");r[a]&&(this.isValid=!1);const l=(0,n.EH)((({value:r})=>{e[a]=r})),u=(0,n.EH)((({error:e})=>{r[a]=e})),f=(0,n.EH)((({value:t,error:n})=>{e[a]=t,r[a]=n}));(0,n.XM)({clock:i([s.changeError,s.errorChanged]),fn:([e])=>({error:e}),target:u}),(0,n.XM)({clock:i([s.change,s.changed]),fn:([e])=>({value:e}),target:l}),(0,n.XM)({clock:i([s.reset,s.resetCompleted]),source:[s.$value,s.$error],fn:([e,r])=>({value:e,error:r}),target:f}),(0,n.XM)({clock:l.done,filter:({params:e})=>!e.batchInfo,fn:()=>({fieldPath:c,type:"value"}),target:this.schemaUpdated}),(0,n.XM)({clock:u.done,filter:({params:e})=>!e.batchInfo,fn:()=>({fieldPath:c,type:"error"}),target:this.schemaUpdated}),(0,n.XM)({clock:f.done,filter:({params:e})=>!e.batchInfo,fn:()=>({fieldPath:c,type:"all"}),target:this.schemaUpdated}),(0,n.XM)({clock:s.batchedSetInnerError,source:s.$outerError,fn:(e,{value:r,"@@batchInfo":t})=>({error:e??r,batchInfo:t}),target:u}),(0,n.XM)({clock:s.batchedSetOuterError,fn:({value:e,"@@batchInfo":r})=>({error:e,batchInfo:r}),target:u}),(0,n.XM)({clock:i([s.batchedSetValue,s.changed]),source:s.$value,fn:(e,[{"@@batchInfo":r}])=>({value:e,batchInfo:r}),target:l}),(0,n.XM)({clock:i([s.batchedReset,s.resetCompleted]),source:[s.$value,s.$error],fn:([e,r],[{"@@batchInfo":t}])=>({value:e,error:r,batchInfo:t}),target:f}),(0,n.XM)({clock:[l.done,u.done,f.done],filter:({params:e})=>!!e.batchInfo,fn:({params:e})=>({fieldPath:c,"@@batchInfo":e.batchInfo}),target:this.batchedSchemaUpdated}),(0,n.XM)({clock:s.focused,fn:()=>({fieldPath:c}),target:this.focused}),(0,n.XM)({clock:s.blurred,fn:()=>({fieldPath:c}),target:this.blurred}),this.api[c]={type:"primitive-field",reset:s.reset,clearMemory:()=>{b(s,!0),h([l,u,f],!0)},batchedSetValue:s.batchedSetValue,batchedSetOuterError:s.batchedSetOuterError,batchedSetInnerError:s.batchedSetInnerError,batchedReset:s.batchedReset,clearInnerError:s.setInnerError.prepend((()=>null)),clearOuterError:s.changeError.prepend((()=>null)),setInnerError:s.setInnerError,setOuterError:s.changeError,setValue:s.change}}function I(e,r,t,n=[]){for(const a in e){const o=e[a];switch(o.type){case f:O.call(this,{field:o,resultValuesNode:r,resultErrorsNode:t,key:a,path:n});break;case y:w.call(this,{field:o,resultValuesNode:r,resultErrorsNode:t,key:a,path:n,map:I});break;default:r[a]={},t[a]={},I.call(this,o,r[a],t[a],[...n,a])}}}function V(e){const{schemaUpdated:r,focused:t,blurred:a}=function(){const e=(0,n.lh)("<schema updated>");return{blurred:(0,n.lh)("<blurred>"),focused:(0,n.lh)("<focused>"),schemaUpdated:e}}(),{batchedSchemaUpdated:o,addBatchTask:c}=function(e){const r=(0,n.y$)({},{name:"<batch info>"}),t=(0,n.lh)(),a=(0,n.lh)("<add batch task>");return(0,n.XM)({clock:a,source:r,fn:(e,r)=>({...e,[r.id]:r}),target:r}),(0,n.XM)({clock:t,source:r,fn:(e,{fieldPath:r,"@@batchInfo":t})=>{const n=e[t.id];return n.fields=n.fields.filter((e=>e!==r)),{...e}},target:r}),(0,n.XM)({clock:r,filter:e=>E(e).tasks.length>0,fn:e=>{const{tasks:r,updateType:t}=E(e);return{fieldPath:r.map((e=>e.fields)).join(" "),type:t}},target:e}),(0,n.XM)({clock:r,fn:e=>{const{tasks:r}=E(e);if(0===r.length)return e;const t={...e};for(const n of r)delete t[n.id];return t},target:r}),{addBatchTask:a,batchedSchemaUpdated:t}}(r),l=function(e,r,t,n,a){const o={},s={},c={},l={isValid:!0,api:c,schemaUpdated:r,batchedSchemaUpdated:t,focused:n,blurred:a};return I.call(l,e,o,s),{values:o,errors:s,api:c,isValid:l.isValid}}(e,r,o,t,a),i=(0,n.y$)(l.api),u=(0,n.y$)(l.values),f=(0,n.y$)(l.errors),d=(0,n.y$)(l.isValid);return(0,n.XM)({clock:r,fn:e=>{switch(e.type){case"value":return{values:{...l.values},api:{...l.api}};case"error":return{errors:{...l.errors},isValid:l.isValid};case"all":return{values:{...l.values},api:{...l.api},errors:{...l.errors},isValid:l.isValid};case"none":return{}}},target:s({api:i,values:u,errors:f,isValid:d})}),{$api:i,$values:u,$errors:f,$isValid:d,addBatchTask:c,focused:t,blurred:a}}function C(e,r,t,n,a=!1){const o=Object.keys(r),s=a?o:Object.keys(e);if(0===Object.keys(s).length)return;const c=$(s,"errors");t(c);for(const l of s){const t=r[l];if(t)switch(n){case"inner":t.batchedSetInnerError({value:e[l]??null,"@@batchInfo":{id:c.id,fieldPath:l}});break;case"outer":t.batchedSetOuterError({value:e[l]??null,"@@batchInfo":{id:c.id,fieldPath:l}})}else console.error(`Unknown field with path: ${l}`)}}function j(e,r,t){const n=Object.keys(e),a=$(n,"errors");r(a);for(const o of n){const r=e[o];"inner"===t?r.batchedSetInnerError({value:null,"@@batchInfo":{fieldPath:o,id:a.id}}):"outer"===t&&r.batchedSetOuterError({value:null,"@@batchInfo":{fieldPath:o,id:a.id}})}}const x={forkOnCreateForm:!0};function P(e,r){const t=!(null==r||!r.clearOuterErrorOnChange);function a(){return e.map(A)}function o(e){return Array.isArray(e)?e.map(A):[A(e)]}const c={...x,...r},l=(0,n.EH)((({nodes:e})=>{for(const r of e){if(v(r))break;M(r)}})),i=(0,n.y$)(a(),{name:"<array field values>",serialize:{read(e){if(!e)throw new Error;if(!Array.isArray(e))throw new Error;return e.map((e=>{const r=A(e.values),t=e.errors,n=A(r),{$api:a,addBatchTask:o}=V(n);return C(t,a.getState(),o,"outer"),n}))},write:e=>e.map((e=>g(e)?e:V(e))).map((e=>g(e)?e:v(e)?null:{values:e.$values.getState(),errors:e.$errors.getState()})).filter(Boolean)}}),u=(0,n.y$)(null,{name:"<inner field error>"}),f=(0,n.y$)((null==r?void 0:r.error)??null,{name:"<outer field error>"}),d=(0,n.kg)({innerError:u,outerError:f}).map((({innerError:e,outerError:r})=>r||e)),p=d.map((e=>null===e)),h=(0,n.y$)(!1),m=(0,n.lh)(),b=(0,n.lh)(),k=(0,n.lh)(),S=(0,n.lh)(),$=(0,n.lh)(),E=(0,n.lh)(),X=(0,n.lh)(),w=(0,n.lh)(),O=(0,n.lh)(),I=(0,n.lh)(),j=(0,n.lh)(),D=(0,n.lh)(),R=(0,n.lh)(),N=(0,n.lh)(),F=(0,n.lh)(),z=(0,n.lh)(),K=(0,n.lh)(),T=(0,n.lh)(),B=(0,n.lh)(),U=(0,n.lh)(),q=(0,n.lh)(),H=(0,n.lh)(),L=(0,n.lh)(),_=(0,n.lh)(),W=(0,n.lh)(),G=(0,n.lh)(),Y=(0,n.lh)(),Z=(0,n.lh)(),J=(0,n.lh)(),Q=(0,n.lh)(),ee=(0,n.K0)({source:i,effect:async(e,r)=>(await l(function(e,r){return e.reduce(((e,t,n)=>(r.includes(t)||(e.nodes.push(t),e.indexes.push(n)),e)),{nodes:[],indexes:[]})}(e,r)),[...r])});t&&(0,n.XM)({clock:i,fn:()=>null,target:f}),(0,n.XM)({clock:i,fn:()=>!0,target:h}),(0,n.XM)({clock:ee.doneData,target:i}),(0,n.XM)({clock:[I,S],fn:()=>({values:[],error:null}),target:s({values:ee,error:f})}),(0,n.XM)({clock:[w,$],fn:()=>{const e=a(),t=(null==r?void 0:r.error)??null;return{sync:e,completed:{values:e,error:t},error:t}},target:s({sync:ee,completed:O,error:f})}),(0,n.XM)({clock:[I,S],target:j});const re=(0,n.K0)({source:i,effect:(e,r)=>e.concat(o(r))}),te=(0,n.K0)({source:i,effect:(e,r)=>{const t=[...e],n=t[r.indexA];return t[r.indexA]=t[r.indexB],t[r.indexB]=n,t}}),ne=(0,n.K0)({source:i,effect:(e,r)=>{const t=[...e];return t.splice(r.to,0,...t.splice(r.from,1)),t}}),ae=(0,n.K0)({source:i,effect:(e,r)=>{const t=[...e];return t.splice(r.index,0,...o(r.value)),t}}),oe=(0,n.K0)({source:i,effect:(e,r)=>{const t=[...e];return t.unshift(...o(r)),t}}),se=(0,n.K0)({source:i,effect:async(e,r)=>{const t=[...e];return t.splice(r.index,1)[0],t}}),ce=(0,n.K0)({source:i,effect:e=>{const r=[...e];return r.pop(),r}}),le=(0,n.K0)({source:i,effect:(e,r)=>{const t=[...e];return t.splice(r.index,1,...o(r.value)),t}});return(0,n.XM)({clock:i,target:X}),(0,n.XM)({clock:k,fn:e=>o(e.value),target:ee}),(0,n.XM)({clock:E,fn:e=>o(e),target:ee}),(0,n.XM)({clock:F,target:re}),(0,n.XM)({clock:re.done,fn:({params:e,result:r})=>({pushed:{params:e,result:r},values:r}),target:s({pushed:z,values:ee})}),(0,n.XM)({clock:K,target:te}),(0,n.XM)({clock:te.done,fn:({params:e,result:r})=>({swapped:{params:e,result:r},values:r}),target:s({swapped:T,values:ee})}),(0,n.XM)({clock:B,target:ne}),(0,n.XM)({clock:ne.done,fn:({params:e,result:r})=>({moved:{params:e,result:r},values:r}),target:s({moved:U,values:ee})}),(0,n.XM)({clock:q,target:ae}),(0,n.XM)({clock:ae.done,fn:({params:e,result:r})=>({inserted:{params:e,result:r},values:r}),target:s({inserted:H,values:ee})}),(0,n.XM)({clock:L,target:oe}),(0,n.XM)({clock:oe.done,fn:({params:e,result:r})=>({unshifted:{params:e,result:r},values:r}),target:s({unshifted:_,values:ee})}),(0,n.XM)({clock:W,target:se}),(0,n.XM)({clock:se.done,fn:({params:e,result:r})=>({removed:{params:e,result:r},values:r}),target:s({removed:G,values:ee})}),(0,n.XM)({clock:Y,target:ce}),(0,n.XM)({clock:ce.doneData,fn:e=>e,target:[ee,Z]}),(0,n.XM)({clock:J,target:le}),(0,n.XM)({clock:le.done,fn:({params:e,result:r})=>({replaced:{params:e,result:r},values:r}),target:s({replaced:Q,values:ee})}),(0,n.XM)({clock:R,target:f}),(0,n.XM)({clock:D,target:u}),(0,n.XM)({clock:R,target:f}),(0,n.XM)({clock:D,target:u}),(0,n.XM)({clock:m,fn:e=>e.value,target:u}),(0,n.XM)({clock:b,fn:e=>e.value,target:f}),(0,n.XM)({clock:m,fn:e=>e.value,target:u}),(0,n.XM)({clock:b,fn:e=>e.value,target:f}),(0,n.XM)({clock:d,target:N}),{type:y,batchedSetInnerError:m,batchedSetOuterError:b,batchedSetValue:k,batchedClear:S,batchedReset:$,$values:i,$error:d,$outerError:f,$innerError:u,$isDirty:h,$isValid:p,setInnerError:D,changeError:R,errorChanged:N,change:E,changed:X,push:F,pushed:z,swap:K,swapped:T,move:B,moved:U,clear:I,cleared:j,insert:q,inserted:H,unshift:L,unshifted:_,remove:W,removed:G,pop:Y,popped:Z,replace:J,replaced:Q,reset:w,resetCompleted:O,forkOnCreateForm:c.forkOnCreateForm,fork:t=>P(e,{...r,...t}),"@@unitShape":()=>({values:i,error:d,isDirty:h,isValid:p,change:E,changeError:R,clear:I,reset:w,push:F,move:B,swap:K,insert:q,unshift:L,remove:W,pop:Y,replace:J})}}function A(e){const r={};if(v(e))return e;for(const t in e){const n=e[t];v(n)?r[t]=p(n):m(n)||S(n)?r[t]=n:Array.isArray(n)?r[t]=P(n):"object"==typeof n&&(r[t]=A(n))}return r}function D(e){const r={};for(const t in e){const n=e[t];switch(n.type){case y:case f:r[t]=n.forkOnCreateForm?n.fork():n;break;case void 0:r[t]=D(n)}}return r}function R(e){const{schema:r,validation:t=(()=>null),validationStrategies:a=["submit","change","blur","focus"],clearOuterErrorsOnSubmit:o=!0}=e,s=D(A(r)),{$errors:c,$values:l,$isValid:u,$api:f,focused:d,blurred:p,addBatchTask:h}=V(s),m=(0,n.y$)(!1),g=(0,n.K0)({source:f,effect:e=>j(e,h,"outer")}),b=(0,n.K0)({source:f,effect:e=>j(e,h,"inner")}),y=(0,n.K0)({source:f,effect:e=>function(e,r){const t=Object.keys(e),n=$(t,"reset");r(n);for(const a of t)e[a].batchedReset({"@@batchInfo":{fieldPath:a,id:n.id}})}(e,h)}),k=(0,n.K0)({source:f,effect:(e,r)=>function(e,r,t){const n={};if(function e(t,a=[]){for(const o in t){const s=t[o],c=[...a,o].join(".");if(v(s)||Array.isArray(s)){const e=r[c];if(!e){console.error(`Unknown field with path: ${c}`);continue}n[c]={event:e.batchedSetValue,value:s}}else"object"==typeof s&&e(s,[...a,o])}}(e),0===Object.keys(n).length)return;const a=$(Object.keys(n),"values");t(a);for(const o in n)n[o].event({value:n[o].value,"@@batchInfo":{id:a.id,fieldPath:o}})}(r,e,h)}),M=(0,n.K0)({source:f,effect:(e,r)=>C(r,e,h,"inner",!0)}),S=(0,n.lh)("<form set values>"),E=(0,n.lh)("<form set partial values>"),X=(0,n.lh)("<form set errors>"),w=(0,n.lh)("<form full clear>"),O=(0,n.lh)("<form clear outer errors>"),I=(0,n.lh)("<form changed>"),x=(0,n.lh)("<form errors changed>"),P=(0,n.lh)("<form submit>"),R=(0,n.lh)("<form submitted>"),N=(0,n.lh)("<form validate>"),F=(0,n.lh)("<form validated>"),z=(0,n.lh)("<form validated and submitted>"),K=(0,n.lh)("<form reset>"),T=(0,n.EH)(t),B=T.pending,U=[...new Set(a)];for(const i of U)switch(i){case"submit":(0,n.XM)({clock:R,target:N});break;case"focus":(0,n.XM)({clock:d,target:N});break;case"blur":(0,n.XM)({clock:p,target:N});break;case"change":(0,n.XM)({clock:I,target:N})}return(0,n.XM)({clock:K,target:y}),(0,n.XM)({clock:l,target:I}),(0,n.XM)({clock:c,target:x}),(0,n.XM)({clock:[S,E],target:k}),(0,n.XM)({clock:X,target:M}),(0,n.XM)({clock:l,fn:()=>!0,target:m}),(0,n.XM)({clock:P,source:l,target:R}),(0,n.XM)({clock:O,target:g}),o&&(0,n.XM)({clock:P,target:O}),(0,n.XM)({clock:N,source:l,target:T}),(0,n.XM)({clock:T.doneData,filter:e=>!e,target:F}),(0,n.XM)({clock:F,target:b}),(0,n.XM)({clock:T.doneData,filter:Boolean,target:X}),(0,n.XM)({clock:i([F,R]),source:l,target:z}),{$errors:c,$values:l,$isDirty:m,$isValid:u,$isValidationPending:B,fields:s,changed:I,errorsChanged:x,submit:P,submitted:R,reset:K,clear:w,validate:N,validated:F,validatedAndSubmitted:z,setValues:S,setErrors:X,setPartialValues:E,"@@unitShape":()=>({errors:c,values:l,isValidationPending:B,isDirty:m,isValid:u,submit:P,validate:N,reset:K,clear:w,setValues:S,setErrors:X,setPartialValues:E})}}},5053:(e,r,t)=>{t.d(r,{mN:()=>u});var n=t(9084),a=t(3721),o=t(6540),s=t(2489);function c(e,r){return r?r.getState(e):e.getState()}function l(e,r){return r?(0,s.GY)(e,{scope:r}):e}function i(e,r){const t={},a=e=>c(e,r),o=e=>l(e,r);for(const s in e){const c=e[s];switch(c.type){case n.OD:t[s]={values:a(c.$values).map((e=>(0,n.tZ)(e)?e:i(e,r))),isDirty:a(c.$isDirty),isValid:a(c.$isValid),error:a(c.$error),onChange:o(c.change),onChangeError:o(c.changeError),onReset:o(c.reset),onPush:o(c.push),onSwap:o(c.swap),onMove:o(c.move),onInsert:o(c.insert),onUnshift:o(c.unshift),onRemove:o(c.remove),onPop:o(c.pop),onReplace:o(c.replace)};break;case n.sw:t[s]={value:a(c.$value),error:a(c.$error),isDirty:a(c.$isDirty),isValid:a(c.$isValid),isFocused:a(c.$isFocused),onChangeError:o(c.changeError),onChange:o(c.change),onFocus:o(c.focus),onBlur:o(c.blur)};break;default:t[s]=i(e[s],r)}}return t}function u(e,r){const t=(0,a.Bg)(),{values:n,errors:s,submit:c,reset:l,clear:u,validate:f,...d}=(0,a.e3)(e),p=(0,o.useMemo)((()=>i(e.fields,t)),[e.fields,n,s]);return(0,o.useEffect)((()=>()=>{null!=r&&r.resetOnUnmount&&l()}),[]),{values:n,errors:s,fields:p,onSubmit:e=>{e.preventDefault(),c()},onReset:l,onValidate:f,onClear:u,...d}}},8453:(e,r,t)=>{t.d(r,{R:()=>s,x:()=>c});var n=t(6540);const a={},o=n.createContext(a);function s(e){const r=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),n.createElement(o.Provider,{value:r},e.children)}},3721:(e,r,t)=>{t.d(r,{Bg:()=>u,e3:()=>i});var n=t(6540),a=t(2489),o=t(9242),s=t(9888);function c(e,r){const t=a.is.unit(e);let o={};t?o={unit:e}:"@@unitShape"in e?"function"==typeof e["@@unitShape"]?o=e["@@unitShape"]():f("expect @@unitShape to be a function"):o=e;const s=Array.isArray(o),c=n.useRef({stale:1,justSubscribed:0,scope:r}),[l,i,u,p,m]=n.useMemo((()=>{c.current.stale=1;const e=Array.isArray(o)?[]:{},n=[],s=[],l=[],i=[];for(const c in o){if(!{}.hasOwnProperty.call(o,c))continue;const u=o[c];a.is.unit(u)||f(`expect useUnit ${t?"argument":`value in key "${c}"`} to be a unit`),a.is.event(u)||a.is.effect(u)?(e[c]=r?(0,a.GY)(u,{scope:r}):u,l.push(c),i.push(u)):(e[c]=null,n.push(c),s.push(u))}return[e,n,s,l,i]}),[c,r,...Object.keys(o),...Object.values(o)]),g=n.useRef({value:l,storeKeys:i,eventKeys:p,eventValues:m}),v=n.useCallback((e=>{const t=c.current;return t.justSubscribed=1,(0,a.AX)({unit:u,fn:()=>{t.stale||(t.stale=1,e())},scope:r,batch:1})}),[u,r,g,c]),b=n.useCallback((()=>{const e=g.current,n=c.current;let a,o=0;const f=e.value,d=e.storeKeys,v=e.eventKeys,b=e.eventValues,y=r!==n.scope;if(n.stale||n.justSubscribed||y){o=!n.justSubscribed||y,a=s?[...l]:{...l},d.length===i.length&&v.length===p.length||(o=1);for(let e=0;e<i.length;e++){const t=h(u[e],r),n=i[e];o||(o=d.includes(n)?f[n]!==t:1),a[n]=t}for(let e=0;e<p.length;e++){const r=m[e],t=p[e];o||(o=v.includes(t)?b[v.indexOf(t)]!==r:1)}}return o&&(e.value=a),e.storeKeys=i,e.eventKeys=p,e.eventValues=m,n.stale=0,n.justSubscribed=!o,n.scope=r,t?e.value.unit:e.value}),[v,u,m,r,g,c]);return d(v,b,b)}function l(e){const r=n.useContext(m);return e&&!r&&f("No scope found, consider adding <Provider> to app root"),r}function i(e,r){return c(e,l(null==r?void 0:r.forceScope))}function u(){return l()||null}const f=e=>{throw Error(e)},{useSyncExternalStore:d}=("undefined"!=typeof window?n.useLayoutEffect:n.useEffect,s),{useSyncExternalStoreWithSelector:p}=o,h=(e,r)=>r?r.getState(e):e.getState(),m=n.createContext(null),{Provider:g}=m},2489:(e,r,t)=>{function n(e,r){for(const t in e)r(e[t],t)}function a(e,r){e.forEach(r)}function o(e,r,t){if(!e)throw Error(`${t?t+": ":""}${r}`)}function s(e,r){const t=V(e).meta||{};ae={id:V(e).id,parent:ae,value:e,template:t.template||se(),sidRoot:t.sidRoot||ae&&ae.sidRoot,meta:t};try{return r()}finally{oe("region"),ae=D(ae)}}function c({node:e=[],from:r,source:t,parent:n=r||t,to:o,target:s,child:c=o||s,scope:l={},meta:i={},family:u={type:"regular"},regional:f}={}){const d=ie(n),p=ie(u.links),h=ie(u.owners),m=[];a(e,(e=>e&&Y(m,e)));const g={id:re(),seq:m,next:ie(c),meta:i,scope:l,family:{type:u.type||"crosslink",links:p,owners:h}};return a(p,(e=>Y(C(e),g))),a(h,(e=>Y(j(e),g))),a(d,(e=>Y(e.next,g))),f&&ae&&le(P(ae),[g]),g}function l(e,r,t){let n,o=He,s=null,c=Te;if(e.target&&(r=e.params,t=e.defer,n=e.meta,o="page"in e?e.page:o,e.stack&&(s=e.stack),c=R(e)||c,e=e.target),c&&Te&&c!==Te&&(Te=null),Array.isArray(e))for(let a=0;a<e.length;a++)Ne("pure",o,V(e[a]),s,r[a],c,n);else Ne("pure",o,V(e),s,r,c,n);if(t&&!Be)return;const l={isRoot:Be,currentPage:He,scope:Te,isWatch:Ue,isPure:qe};let i,u,f,d,p,h;Be=0;e:for(;d=Re();){const{idx:e,stack:r,type:t}=d;f=r.node,He=p=r.page,Te=R(r),p?h=p.reg:Te&&(h=Te.reg);const n=!!p,o=!!Te,s={fail:0,scope:f.scope};i=u=0;for(let a=e;a<f.seq.length&&!i;a++){const c=f.seq[a];if(c.order){const{priority:n,barrierID:o}=c.order,s=o?p?`${p.fullID}_${o}`:o:0;if(a!==e||t!==n){o?Ke.has(s)||(Ke.add(s),Fe(a,r,n,o)):Fe(a,r,n,0);continue e}o&&Ke.delete(s)}switch(c.type){case"mov":{const e=c.data;let t;switch(e.from){case"stack":t=P(r);break;case"a":case"b":t=r[e.from];break;case"value":t=e.store;break;case"store":if(h&&!h[e.store.id])if(n){const t=We(p,e.store.id);r.page=p=t,t?h=t.reg:o?(Je(Te,e.store,0,1,e.softRead),h=Te.reg):h=void 0}else o&&Je(Te,e.store,0,1,e.softRead);t=Ce(h&&h[e.store.id]||e.store)}switch(e.to){case"stack":r.value=t;break;case"a":case"b":r[e.to]=t;break;case"store":Ge(p,Te,e.target,0).current=t}break}case"compute":const e=c.data;if(e.fn){Ue="watch"===f.meta.op,qe=e.pure;const t=e.safe?(0,e.fn)(P(r),s.scope,r):Qe(s,e.fn,r);e.filter?u=!t:r.value=t,Ue=l.isWatch,qe=l.isPure}}i=s.fail||u}if(Ye&&Ye(r,s),!i){const e=P(r),t=R(r);if(a(f.next,(n=>{Ne("child",p,n,r,e,t)})),t){f.meta.needFxCounter&&Ne("child",p,t.fxCount,r,e,t),f.meta.storeChange&&Ne("child",p,t.storeChange,r,e,t),f.meta.warnSerialize&&Ne("child",p,t.warnSerializeNode,r,e,t);const n=t.additionalLinks[f.id];n&&a(n,(n=>{Ne("child",p,n,r,e,t)}))}}}Be=l.isRoot,He=l.currentPage,Te=R(l)}function i(e,r="combine"){let t=r+"(",a="",o=0;return n(e,(e=>{o<25&&(null!=e&&(t+=a,t+=K(e)?z(e).fullName:e.toString()),o+=1,a=", ")})),t+")"}function u(e,r){let t,n;const a=e;if(r){const a=z(r);0===e.length?(t=a.path,n=a.fullName):(t=a.path.concat([e]),n=0===a.fullName.length?e:a.fullName+"/"+e)}else t=0===e.length?[]:[e],n=e;return{shortName:a,fullName:n,path:t}}function f(e,r){if(!r)return e;if(!r.name&&!r.named&&!r.loc)return e;let t=`[${e}]`;const n=r.named||r.name;n&&(t+=` unit '${n}'`);const a=r.loc;return!n&&a&&(t+=` (${a.file}:${a.line}:${a.column})`),t}function d(e,r){const t=r?e:e[0];pe(t);let n=t.or;const a=t.and;if(a){const t=r?a:a[0];if(ue(t)&&"and"in t){const t=d(a,r);e=t[0],n={...n,...t[1]}}else e=a}return[e,n]}function p(e){const r=()=>e();return r.unsubscribe=()=>e(),r}function h(e,...r){const t=se();if(t){const n=t.handlers[e];if(n)return n(t,...r)}}function m(e,r){const t=er({or:r,and:"string"==typeof e?{name:e}:e}),n=f("event",t),a=(e,...r)=>(o(!N(a,"derived"),"call of derived event is not supported, use createEvent instead",n),o(!qe,"unit call from pure function is not supported, use operators like sample instead",n),He?((e,r,t,n)=>{const a=He;let o=null;if(r)for(o=He;o&&o.template!==r;)o=D(o);_e(o);const s=e.create(t,n);return _e(a),s})(a,s,e,r):a.create(e,r)),s=se(),i=Object.assign(a,{graphite:c({meta:ir(t.actualOp||"event",a,t),regional:1}),create:e=>(l({target:a,params:e,scope:Te}),e),watch:e=>cr(a,e),map:e=>ur(a,"map",e,[Oe()]),filter:e=>ur(a,"filter",e.fn?e:e.fn,[Oe(ye,1)]),filterMap:e=>ur(a,"filterMap",e,[Oe(),Xe((e=>!de(e)),1)]),prepend(e){o(a.targetable,".prepend of derived event is not supported, call source event instead",n);const r=m("* \u2192 "+a.shortName,{parent:D(a)});return h("eventPrepend",V(r)),sr(r,a,[Oe()],"prepend",e),lr(a,r),r}});return null!=t&&t.domain&&t.domain.hooks.event(i),F(i,"id",i.graphite.id),oe(i.graphite),i}function g(e,r,t,n,s){return me(t,`${s} ${r}`,"first argument"),o(fe(n),"second argument should be a function",s),Z(!N(e,"derived"),`${r} in derived store`,`${r} in store created via createStore`,s),a(Array.isArray(t)?t:[t],(r=>{e.off(r),A(e).set(r,or(dr(r,e,"on",be,n)))})),e}function v(e,r){const t=er(r),n=Ve(e),s=f("store",t),i=m({named:"updates",derived:1});h("storeBase",n);const u=n.id,d="skipVoid"in t,p=d&&!t.skipVoid;Z(!(d&&t.skipVoid),"{skipVoid: true}","updateFilter",s);const b={subscribers:new Map,updates:i,defaultState:e,stateRef:n,getState(){let e,r=n;if(He){let r=He;for(;r&&!r.reg[u];)r=D(r);r&&(e=r)}return!e&&Te&&(Je(Te,n,1),e=Te),e&&(r=e.reg[u]),Ce(r)},setState:e=>l({target:b,params:e,defer:1,scope:Te}),reset:(...e)=>(o(b.targetable,".reset of derived store is not supported",s),a(e,(e=>g(b,".reset",e,(()=>b.defaultState),s))),b),on:(e,r)=>(o(b.targetable,".on of derived store is not supported",s),g(b,".on",e,r,s)),off(e){const r=A(b).get(e);return r&&(r(),A(b).delete(e)),b},map(e,r){let t,a;ue(e)&&(t=e,e=e.fn);const o=b.getState(),s=de(o);se()?a=null:(!s||s&&p)&&(a=e(o));const c=v(a,{name:`${b.shortName} \u2192 *`,derived:1,...r,and:t}),l=dr(b,c,"map",ye,e);return je(x(c),{type:"map",fn:e,from:n}),x(c).noInit=1,h("storeMap",n,l),c},watch(e,r){if(Z(!r,"watch second argument","sample",s),!r||!K(e)){const r=cr(b,e);return h("storeWatch",n,e)||e(b.getState()),r}return o(fe(r),"second argument should be a function",s),e.watch((e=>r(b.getState(),e)))}},y=ir("store",b,t),k=b.defaultConfig.updateFilter;b.graphite=c({scope:{state:n,fn:k},node:[Xe(((e,r,t)=>(t.scope&&!t.scope.reg[n.id]&&(t.b=1),e))),we(n),Xe(((e,r,{a:t,b:n})=>{const a=de(e);return a&&!d&&console.error(`${s}: ${fr}`),(a&&p||!a)&&(e!==t||n)}),1),k&&Oe(ve,1),Se({from:"stack",target:n})],child:i,meta:{...y,defaultState:e},regional:1}),F(b,"id",b.graphite.id),F(b,"rootStateRefId",u);const M=N(b,"serialize"),S=N(b,"derived"),$="ignore"===M,E=N(b,"sid");E&&(F(b,"storeChange",1),n.sid=E),E||$||S||F(b,"warnSerialize",1);const X=de(e);return o(S||!X||X&&p,fr,s),S&&X&&!d&&console.error(`${s}: ${fr}`),le(b,[i]),null!=t&&t.domain&&t.domain.hooks.store(b),S||(b.reinit=m({named:"reinit"}),b.reset(b.reinit)),n.meta=b.graphite.meta,oe(b.graphite),b}function b(...e){let r,t,n;[e,n]=d(e);const a=f("combine",n),s=e[e.length-1],c=e.length>1&&!B(s)&&ue(s),l=c&&s,i=c?e[e.length-2]:s;let u,p,h;if(fe(i)?(t=e.slice(0,c?-2:-1),r=i):t=e,1===t.length){const e=t[0];B(e)||(u=e,p=1)}if(!p&&(u=t,r)){h=1;const e=r;r=r=>e(...r)}return o(ue(u),`${a}: shape should be an object`),pr(Array.isArray(u),!h,u,n,r,l)}function y(){const e={};return e.req=new Promise(((r,t)=>{e.rs=r,e.rj=t})),e.req.catch((()=>{})),e}function k(e,r={}){const t=er(fe(e)?{handler:e}:e,r),n=f("effect",t),a=m(fe(e)?{handler:e}:e,{...r,actualOp:"effect"}),s=V(a);F(s,"op",a.kind="effect"),a.use=e=>(o(fe(e),".use argument should be a function",n),g.scope.handler=e,a),a.use.getCurrent=()=>g.scope.handler;const i=a.finally=m({named:"finally",derived:1}),u=a.done=i.filterMap({named:"done",fn({status:e,params:r,result:t}){if("done"===e)return{params:r,result:t}}}),d=a.fail=i.filterMap({named:"fail",fn({status:e,params:r,error:t}){if("fail"===e)return{params:r,error:t}}}),p=a.doneData=u.map({named:"doneData",fn:({result:e})=>e}),h=a.failData=d.map({named:"failData",fn:({error:e})=>e}),g=c({scope:{handler:a.defaultConfig.handler||(()=>o(0,`no handler used in ${a.compositeName.fullName}`))},node:[Xe(((e,r,t)=>{let n=r.handler;const o=R(t);if(o){const e=o.handlers.unitMap.get(a)||o.handlers.sidMap[a.sid];e&&(n=e)}return e.handler=n,e}),0,1),Xe(((e,r,t)=>{if(r.runnerFn&&!r.runnerFn(e,null,t))return;const{params:n,req:a,handler:o,args:s=[n]}=e,c=mr(n,a,1,i,t),l=mr(n,a,0,i,t),[u,f]=hr(o,l,s);u&&(ue(f)&&fe(f.then)?f.then(c,l):c(f))}),0,1)],meta:{op:"fx",fx:"runner"}});s.scope.runner=g,Y(s.seq,Xe(((e,{runner:r},t)=>{const n=D(t)?{params:e,req:{rs(e){},rj(e){}}}:e;return t.meta||(t.meta={fxID:te()}),l({target:r,params:n,defer:1,scope:R(t),meta:t.meta}),n.params}))),a.create=e=>{const r=y(),t={params:e,req:r};if(Te&&!Ue){const e=Te;r.req.finally((()=>{Le(e)})).catch((()=>{}))}return l({target:a,params:t,scope:Te}),r.req};const b=a.inFlight=v(0,{serialize:"ignore",named:(N(a,"name")||a.graphite.id)+".inFlight"}).on(a,(e=>e+1)).on(i,(e=>e-1)).map({fn:e=>e,named:"inFlight"});F(i,"needFxCounter","dec"),F(a,"needFxCounter",1);const k=a.pending=b.map({fn:e=>e>0,named:"pending"});return le(a,[i,u,d,p,h,k,b]),null!=t&&t.domain&&t.domain.hooks.effect(a),a}function M(e){let r;[e,r]=d(e,1);const t=f("attach",r);let{source:n,effect:a,mapParams:s,domain:c}=e;q(a)&&o(de(c),"`domain` can only be used with a plain function",t);const i=k(e,r);F(i,"attached",1);const{runner:p}=V(i).scope;let h;const m=(e,r,t)=>{const{params:a,req:o,handler:c}=e,u=i.finally,f=mr(a,o,0,u,t),d=t.a,p=q(c);let h,m=1;if(s?[m,h]=hr(s,f,[a,d]):h=n&&p?d:a,m){if(!p)return e.args=[d,h],1;l({target:c,params:{params:h,req:{rs:mr(a,o,1,u,t),rj:f}},page:t.page,defer:1,meta:t.meta})}};if(n){let e;p.scope.runnerFn=m,B(n)?(e=n,le(e,[i])):(e=b(n),le(i,[e])),h=[Xe((e=>e),0,1),we(x(e))],delete p.seq[1].order}else h=[Xe(m,1,1)];p.seq.splice(1,0,...h),i.use(a);const g=D(a);return g&&(Object.assign(z(i),u(i.shortName,g)),i.defaultConfig.parent=g),lr(a,i,"effect"),i}function S(e,r){const t=f("merge",r);me(e,t,"first argument");const n=m({name:i(e,"merge"),derived:1,and:r});return sr(e,n,[],"merge"),n}function $(e,r){let t=0;return a(vr,(n=>{n in e&&(o(null!=e[n],br(r,n)),t=1)})),t}function E(...e){let r,t,n,a,[[o,s,c],l]=d(e),i=1;const u=f("sample",l);return de(s)&&ue(o)&&$(o,u)&&(s=o.clock,c=o.fn,"batch"in o?i=o.batch:(Z(!("greedy"in o),"greedy in sample","batch",u),i=!o.greedy),a=o.filter,r=o.target,t=o.name,n=o.sid,o=o.source),yr("sample",s,o,a,r,c,t,l,i,1,0,n)}function X(e,{scope:r,safe:t}={}){o(r||Te||t,"scopeBind: scope not found");const n=r||Te;return r=>{function t(){Le(s)}let a,o=0;const s=Te;Le(n);try{a=e(r)}catch(e){a=e,o=1}if(t(),o)throw a;return a instanceof Promise&&a.then(t,t),a}}function w({unit:e,fn:r,scope:t,batch:n}){const a=[Ie.run({fn:e=>r(e)})];n&&a.unshift(Ie.compute({priority:"sampler",batch:1})),B(e)&&a.unshift(Ie.mov({store:e.stateRef,to:"stack"}));const o=Array.isArray(e)?e:[e];if(t){const e=[],r=t.additionalLinks;return o.forEach((t=>{const n=r[t.graphite.id]||[];r[t.graphite.id]=n;const o=c({node:O(a,t),meta:{watchOp:t.kind}});n.push(o),e.push((()=>{const e=n.indexOf(o);-1!==e&&n.splice(e,1),ar(o)}))})),p((()=>{e.forEach((e=>e()))}))}{const e=c({node:a,parent:o,family:{owners:o}});return p((()=>{ar(e)}))}}function O(e,r){return B(r)?[Ie.mov({store:r.stateRef,to:"stack"}),...e]:e}t.d(r,{AX:()=>w,EH:()=>k,GY:()=>X,K0:()=>M,Ns:()=>s,XM:()=>E,is:()=>W,kg:()=>b,lh:()=>m,w_:()=>ar,y$:()=>v});const I="undefined"!=typeof Symbol&&Symbol.observable||"@@observable",V=e=>e.graphite||e,C=e=>e.family.owners,j=e=>e.family.links,x=e=>e.stateRef,P=e=>e.value,A=e=>e.subscribers,D=e=>e.parent,R=e=>e.scope,N=(e,r)=>V(e).meta[r],F=(e,r,t)=>V(e).meta[r]=t,z=e=>e.compositeName,K=e=>(fe(e)||ue(e))&&"kind"in e,T=e=>r=>K(r)&&r.kind===e,B=T("store"),U=T("event"),q=T("effect"),H=e=>K(e)&&!!e.targetable,L=T("domain"),_=T("scope");var W={__proto__:null,unit:K,store:B,event:U,effect:q,targetable:H,domain:L,scope:_,attached:e=>q(e)&&1==N(e,"attached")};const G=(e,r)=>{const t=e.indexOf(r);-1!==t&&e.splice(t,1)},Y=(e,r)=>e.push(r),Z=(e,r,t,n)=>!e&&console.error(`${n?n+": ":""}${r} is deprecated${t?`, use ${t} instead`:""}`),J=()=>{let e=0;return()=>""+ ++e},Q=J(),ee=J(),re=J(),te=J();let ne;let ae=null;const oe=e=>{ne&&ne(e,ae)},se=()=>ae&&ae.template,ce=e=>(e&&ae&&ae.sidRoot&&(e=`${ae.sidRoot}|${e}`),e),le=(e,r)=>{const t=V(e);a(r,(e=>{const r=V(e);"domain"!==t.family.type&&(r.family.type="crosslink"),Y(C(r),t),Y(j(t),r)}))},ie=(e=[])=>(Array.isArray(e)?e:[e]).flat().map(V),ue=e=>"object"==typeof e&&null!==e,fe=e=>"function"==typeof e,de=e=>void 0===e,pe=e=>o(ue(e)||fe(e),"expect first argument be an object"),he=(e,r,t,n)=>o(!(!ue(e)&&!fe(e)||!("family"in e)&&!("graphite"in e)),`${r}: expect ${t} to be a unit (store, event or effect)${n}`),me=(e,r,t)=>{Array.isArray(e)?a(e,((e,n)=>he(e,r,`${n} item of ${t}`,""))):he(e,r,t," or array of units")},ge=(e,r,t="target")=>a(ie(r),(r=>o(!N(r,"derived"),`${e}: derived unit in "${t}" is not supported, use createStore/createEvent instead"`))),ve=(e,{fn:r},{a:t})=>r(e,t),be=(e,{fn:r},{a:t})=>r(t,e),ye=(e,{fn:r})=>r(e),ke=(e,r,t,n)=>{const a={id:ee(),type:e,data:r};return t&&(a.order={priority:t},n&&(a.order.barrierID=++Me)),a};let Me=0;const Se=({from:e="store",store:r,target:t,to:n=(t?"store":"stack"),batch:a,priority:o})=>ke("mov",{from:e,store:r,to:n,target:t},o,a),$e=({fn:e,batch:r,priority:t,safe:n=0,filter:a=0,pure:o=0})=>ke("compute",{fn:e,safe:n,filter:a,pure:o},t,r),Ee=({fn:e})=>$e({fn:e,priority:"effect"}),Xe=(e,r,t)=>$e({fn:e,safe:1,filter:r,priority:t&&"effect"}),we=(e,r,t)=>Se({store:e,to:r?"stack":"a",priority:t&&"sampler",batch:1}),Oe=(e=ye,r)=>$e({fn:e,pure:1,filter:r}),Ie={mov:Se,compute:$e,filter:({fn:e,pure:r})=>$e({fn:e,filter:1,pure:r}),run:Ee},Ve=e=>({id:ee(),current:e,initial:e}),Ce=({current:e})=>e,je=(e,r)=>{e.before||(e.before=[]),Y(e.before,r)};let xe=null;const Pe=(e,r)=>{if(!e)return r;if(!r)return e;let t;return(e.v.type===r.v.type&&e.v.id>r.v.id||ze(e.v.type)>ze(r.v.type))&&(t=e,e=r,r=t),t=Pe(e.r,r),e.r=e.l,e.l=t,e},Ae=[];let De=0;for(;De<6;)Y(Ae,{first:null,last:null,size:0}),De+=1;const Re=()=>{for(let e=0;e<6;e++){const r=Ae[e];if(r.size>0){if(3===e||4===e){r.size-=1;const e=xe.v;return xe=Pe(xe.l,xe.r),e}1===r.size&&(r.last=null);const t=r.first;return r.first=t.r,r.size-=1,t.v}}},Ne=(e,r,t,n,a,o,s)=>Fe(0,{a:null,b:null,node:t,parent:n,value:a,page:r,scope:o,meta:s},e,0),Fe=(e,r,t,n)=>{const a=ze(t),o=Ae[a],s={v:{idx:e,stack:r,type:t,id:n},l:null,r:null};3===a||4===a?xe=Pe(xe,s):(0===o.size?o.first=s:o.last.r=s,o.last=s),o.size+=1},ze=e=>{switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},Ke=new Set;let Te,Be=1,Ue=0,qe=0,He=null;const Le=e=>{Te=e},_e=e=>{He=e},We=(e,r)=>{if(e){for(;e&&!e.reg[r];)e=e.parent;if(e)return e}return null},Ge=(e,r,t,n)=>{const a=We(e,t.id);return a?a.reg[t.id]:r?(Je(r,t,n),r.reg[t.id]):t};let Ye;const Ze=e=>e,Je=(e,r,t,n,o)=>{const s=e.reg;if(s[r.id])return;const c=r.sid,l={id:r.id,current:r.initial,meta:r.meta};if(l.id in e.values.idMap)l.current=e.values.idMap[l.id];else if(c&&c in e.values.sidMap&&!(c in e.sidIdMap)){var i;const t=null==r||null===(i=r.meta)||void 0===i?void 0:i.serialize;l.current=(e.fromSerialize&&"ignore"!==t&&(null==t?void 0:t.read)||Ze)(e.values.sidMap[c])}else if(r.before&&!o){let o=0;const c=t||!r.noInit||n;a(r.before,(r=>{switch(r.type){case"map":{const a=r.from;if((a||r.fn)&&(a&&Je(e,a,t,n),c)){const e=a&&s[a.id].current;l.current=r.fn?r.fn(e):e}break}case"field":Je(e,r.from,t,n),o||(o=1,l.current=Array.isArray(l.current)?[...l.current]:{...l.current}),c&&(l.current[r.field]=s[s[r.from.id].id].current)}}))}c&&(e.sidIdMap[c]=r.id),s[r.id]=l},Qe=(e,r,t)=>{try{return r(P(t),e.scope,t)}catch(r){console.error(r),e.fail=1,e.failReason=r}},er=(e,r={})=>(ue(e)&&(er(e.or,r),n(e,((e,t)=>{de(e)||"or"===t||"and"===t||(r[t]=e)})),er(e.and,r)),r),rr=(e,r)=>{G(e.next,r),G(C(e),r),G(j(e),r)},tr=(e,r,t)=>{let n;e.next.length=0,e.seq.length=0,e.scope=null;let a=j(e);for(;n=a.pop();)rr(n,e),(r||t&&"sample"!==e.meta.op||"crosslink"===n.family.type)&&tr(n,r,"on"!==n.meta.op&&t);for(a=C(e);n=a.pop();)rr(n,e),t&&"crosslink"===n.family.type&&tr(n,r,"on"!==n.meta.op&&t)},nr=e=>e.clear(),ar=(e,{deep:r}={})=>{let t=0;if(e.ownerSet&&e.ownerSet.delete(e),B(e))nr(A(e));else if(L(e)){t=1;const r=e.history;nr(r.events),nr(r.effects),nr(r.stores),nr(r.domains)}tr(V(e),!!r,t)},or=e=>p((()=>ar(e))),sr=(e,r,t,n,a)=>c({node:t,parent:e,child:r,scope:{fn:a},meta:{op:n},family:{owners:[e,r],links:r},regional:1}),cr=(e,r)=>(o(fe(r),".watch argument should be a function"),or(c({scope:{fn:r},node:[Ee({fn:ye})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))),lr=(e,r,t="event")=>{D(e)&&D(e).hooks[t](r)},ir=(e,r,t)=>{const n=er(t),a="domain"===e,o=Q(),{sid:s=null,named:c=null,domain:l=null,parent:i=l}=n,f=c||n.name||(a?"":o),d=u(f,i),p={op:r.kind=e,name:r.shortName=f,sid:r.sid=ce(s),named:c,unitId:r.id=o,serialize:n.serialize,derived:n.derived,config:n};if(r.targetable=!n.derived,r.parent=i,r.compositeName=d,r.defaultConfig=n,r.getType=()=>(Z(0,"getType","compositeName.fullName"),d.fullName),!a){r.subscribe=e=>(pe(e),r.watch(fe(e)?e:r=>e.next&&e.next(r))),r[I]=()=>r;const e=se();e&&(p.nativeTemplate=e)}return p},ur=(e,r,t,n)=>{let a;ue(t)&&(a=t,t=t.fn);const o=m({name:`${e.shortName} \u2192 *`,derived:1,and:a});return sr(e,o,n,r,t),o},fr="undefined is used to skip updates. To allow undefined as a value provide explicit { skipVoid: false } option",dr=(e,r,t,n,a)=>{const o=x(r),s=Se({store:o,to:"a",priority:"read"});"map"===t&&(s.data.softRead=1);const c=[s,Oe(n)];return h("storeOnMap",o,c,B(e)&&x(e)),sr(e,r,c,t,a)},pr=(e,r,t,a,s,c)=>{const l=f("combine",a),u=e?e=>[...e]:e=>({...e}),d=e?[]:{},p=u(d),m=Ve(p),g=Ve(1);m.type=e?"list":"shape",m.noInit=1,h("combineBase",m,g);const b=v(p,{name:i(t),derived:1,...c,and:a}),y=x(b);y.noInit=1,F(b,"isCombine",1);const k=we(m);k.order={priority:"barrier"};const M=Se({store:y,to:"b",priority:"read"});M.data.softRead=1;const S=[Xe(((e,r,t)=>(t.scope&&!t.scope.reg[m.id]&&(t.c=1),e))),k,Se({store:g,to:"b"}),Xe(((e,{key:t},n)=>{if(n.c||e!==n.a[t])return r&&n.b&&(n.a=u(n.a)),n.a[t]=e,1}),1),Se({from:"a",target:m}),Se({from:"value",store:0,target:g}),Se({from:"value",store:1,target:g,priority:"barrier",batch:1}),we(m,1,1),s&&Oe(),M];if(n(t,((e,r)=>{if(!B(e))return o(!K(e)&&!de(e),`combine expects a store in a field ${r}`,l),void(p[r]=d[r]=e);d[r]=e.defaultState,p[r]=e.getState();const t=sr(e,b,S,"combine",s);t.scope.key=r;const n=x(e);je(m,{type:"field",field:r,from:n}),h("combineField",n,t)})),b.defaultShape=t,je(y,{type:"map",from:m,fn:s}),!se())if(s){const e=s(p);!de(e)||c&&"skipVoid"in c||console.error(`${l}: ${fr}`),y.current=e,y.initial=e,b.defaultState=e}else b.defaultState=d;return b},hr=(e,r,t)=>{try{return[1,e(...t)]}catch(e){return r(e),[0,null]}},mr=(e,r,t,n,a)=>o=>{l({target:[n,gr],params:[t?{status:"done",params:e,result:o}:{status:"fail",params:e,error:o},{value:o,fn:t?r.rs:r.rj}],defer:1,page:a.page,scope:a.scope,meta:a.meta})},gr=c({node:[Ee({fn:({fn:e,value:r})=>e(r)})],meta:{op:"fx",fx:"sidechain"}}),vr=["source","clock","target"],br=(e,r)=>e+`: ${r} should be defined`,yr=(e,r,t,n,a,s,c,l,i,u,d,p)=>{const g=f(e,l),y=!!a;o(!de(t)||!de(r),br(g,"either source or clock"));let k=0;de(t)?k=1:K(t)||(t=b(t)),de(r)?r=t:(me(r,g,"clock"),Array.isArray(r)&&(r=S(r))),k&&(t=r),l||c||(c=t.shortName);let M="none";(d||n)&&(K(n)?M="unit":(o(fe(n),"`filter` should be function or unit"),M="fn")),a?(me(a,g,"target"),ge(g,a)):"none"===M&&u&&B(t)&&B(r)?a=v(s?s(Ce(x(t)),Ce(x(r))):Ce(x(t)),{name:c,sid:p,or:l}):(a=m({name:c,derived:1,or:l}),h("sampleTarget",V(a)));const $=Ve();let E=[];if("unit"===M){const[t,o,s]=Mr(n,a,r,$,e);s||E.push(...kr(o)),E.push(...kr(t))}const X=[];if(k)i&&X.push(we($,1,1));else{const[n,o,s]=Mr(t,a,r,$,e);s||X.push(...kr(o)),X.push(we(n,1,i))}const w=sr(r,a,[h("sampleSourceLoader"),Se({from:"stack",target:$}),...X,...E,we($),"fn"===M&&Oe(((e,r,{a:t})=>n(e,t)),1),s&&Oe(ve),h("sampleSourceUpward",y)],e,s);return le(t,[w]),Object.assign(w.meta,l,{joint:1}),a},kr=e=>[we(e),Xe(((e,r,{a:t})=>t),1)],Mr=(e,r,t,n,a)=>{const o=B(e),s=o?x(e):Ve(),l=Ve(o);return o||c({parent:e,node:[Se({from:"stack",target:s}),Se({from:"value",store:1,target:l})],family:{owners:[e,r,t],links:r},meta:{op:a},regional:1}),h("sampleSource",l,s,n),[s,l,o]}}}]);